
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>用例 · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-donate/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-back-to-top-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../styles/website.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="docker.html" />
    
    
    <link rel="prev" href="apidrive.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    ABOUT
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <a target="_blank" href="https://cloudadc.github.io/container-ingress">
            
                    
                    CONTAINER INGRESS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../k8s-net/">
            
                <a href="../k8s-net/">
            
                    
                    CONTAINER NETWORK
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../k8s-net/docker.html">
            
                <a href="../k8s-net/docker.html">
            
                    
                    Docker
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="./">
            
                <a href="./">
            
                    
                    NGINX
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="concepts.html">
            
                <a href="concepts.html">
            
                    
                    入门到精通
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="install.html">
            
                <a href="install.html">
            
                    
                    离线安装
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="controller.html">
            
                <a href="controller.html">
            
                    
                    Nginx Controller
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.3.1" data-path="apidrive.html">
            
                <a href="apidrive.html">
            
                    
                    API
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="1.4.4" data-path="usecase.html">
            
                <a href="usecase.html">
            
                    
                    用例
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.4.1" data-path="docker.html">
            
                <a href="docker.html">
            
                    
                    Docker
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="app/">
            
                <a href="app/">
            
                    
                    现代应用
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <a target="_blank" href="https://cloudadc.github.io/nodejs-honeypot/">
            
                    
                    NODE.JS HONEYPOT
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../dist.html">
            
                <a href="../dist.html">
            
                    
                    DISTRIBUTED
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../zk/">
            
                <a href="../zk/">
            
                    
                    ZooKeeper
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" >
            
                <a target="_blank" href="https://cloudadc.github.io/distribute-dev-framework/content/dubbo">
            
                    
                    DUBBO
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../mongo/">
            
                <a href="../mongo/">
            
                    
                    MongoDB
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.3.1" data-path="../mongo/viewpoint/presentation.html">
            
                <a href="../mongo/viewpoint/presentation.html">
            
                    
                    定位
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.3.1.1" data-path="../mongo/viewpoint/5thingsfornosql.html">
            
                <a href="../mongo/viewpoint/5thingsfornosql.html">
            
                    
                    NOSQL 选择五维度
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.1.2" data-path="../mongo/viewpoint/oversea.html">
            
                <a href="../mongo/viewpoint/oversea.html">
            
                    
                    MongoDB 助力企业出海
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.1.3" data-path="../mongo/viewpoint/td.html">
            
                <a href="../mongo/viewpoint/td.html">
            
                    
                    Teradata 优化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.1.4" data-path="../mongo/viewpoint/cards.html">
            
                <a href="../mongo/viewpoint/cards.html">
            
                    
                    MongoDB 对话卡片
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.3.2" data-path="../mongo/dba/basic.html">
            
                <a href="../mongo/dba/basic.html">
            
                    
                    基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.3" data-path="../mongo/dev/">
            
                <a href="../mongo/dev/">
            
                    
                    开发
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.3.3.1" data-path="../mongo/dev/aggregation.html">
            
                <a href="../mongo/dev/aggregation.html">
            
                    
                    Aggregation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.3.2" data-path="../mongo/dev/aggregation-sum.html">
            
                <a href="../mongo/dev/aggregation-sum.html">
            
                    
                    $sum
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.3.3" data-path="../mongo/dev/transactions.html">
            
                <a href="../mongo/dev/transactions.html">
            
                    
                    分布式事务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.3.4" data-path="../mongo/dev/java.html">
            
                <a href="../mongo/dev/java.html">
            
                    
                    Java
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.3.5" data-path="../mongo/dev/geo.html">
            
                <a href="../mongo/dev/geo.html">
            
                    
                    地理信息
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.3.4" data-path="../mongo/dba/cluster-admin.html">
            
                <a href="../mongo/dba/cluster-admin.html">
            
                    
                    运维
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.3.4.1" data-path="../mongo/dba/replication.html">
            
                <a href="../mongo/dba/replication.html">
            
                    
                    高可用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.4.2" data-path="../mongo/dba/rs-deployments.html">
            
                <a href="../mongo/dba/rs-deployments.html">
            
                    
                    部署
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.4.3" data-path="../mongo/dba/rs-maintenance.html">
            
                <a href="../mongo/dba/rs-maintenance.html">
            
                    
                    维护
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.4.4" data-path="../mongo/dba/sharding.html">
            
                <a href="../mongo/dba/sharding.html">
            
                    
                    分片
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.4.5" data-path="../mongo/dba/dba.html">
            
                <a href="../mongo/dba/dba.html">
            
                    
                    DBA
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.4.6" data-path="../mongo/dba/sh-restore.html">
            
                <a href="../mongo/dba/sh-restore.html">
            
                    
                    基于 Delayed Secondary 时间点恢复
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.4.7" data-path="../mongo/dba/opsmanager.html">
            
                <a href="../mongo/dba/opsmanager.html">
            
                    
                    Ops Manager
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.4.8" data-path="../mongo/dba/perf.html">
            
                <a href="../mongo/dba/perf.html">
            
                    
                    性能调优
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.4.9" data-path="../mongo/dba/troubleshooting.html">
            
                <a href="../mongo/dba/troubleshooting.html">
            
                    
                    监控
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.3.5" data-path="../mongo/dba/security.html">
            
                <a href="../mongo/dba/security.html">
            
                    
                    安全
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../kafka/">
            
                <a href="../kafka/">
            
                    
                    Kafka
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.4.1" data-path="../kafka/installing/">
            
                <a href="../kafka/installing/">
            
                    
                    安装
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../elastic/">
            
                <a href="../elastic/">
            
                    
                    ElasticSearch
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="../spark/">
            
                <a href="../spark/">
            
                    
                    Spark
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >用例</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="nginx-plus-use-case">Nginx Plus Use Case</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#__">&#x57FA;&#x7840;&#x914D;&#x7F6E;</a>
<ul class="sectlevel2">
<li><a href="#___2">&#x81EA;&#x5B9A;&#x4E49;&#x6B22;&#x8FCE;&#x9875;&#x9762;</a></li>
<li><a href="#_api_dashboard">API &#x53CA; Dashboard &#x80FD;&#x529B;</a></li>
</ul>
</li>
<li><a href="#___3">&#x8D1F;&#x8F7D;&#x5747;&#x8861;</a>
<ul class="sectlevel2">
<li><a href="#___4">&#x6D41;&#x91CF;&#x8F6C;&#x53D1;&#x4E2D;&#x7684;&#x884C;&#x4E3A;</a></li>
<li><a href="#__ip">&#x670D;&#x52A1;&#x5668;&#x83B7;&#x53D6;&#x771F;&#x5B9E;&#x5BA2;&#x6237;&#x7AEF;IP</a></li>
<li><a href="#___5">&#x8F6E;&#x8BE2;&#x8D1F;&#x8F7D;&#x7B97;&#x6CD5;</a></li>
<li><a href="#___6">&#x6700;&#x5C0F;&#x8FDE;&#x63A5;&#x6570;&#x8D1F;&#x8F7D;&#x7B97;&#x6CD5;</a></li>
<li><a href="#___7">&#x6743;&#x91CD;&#x4E0E;&#x4F18;&#x5148;&#x7EA7;&#x8D1F;&#x8F7D;&#x7B97;&#x6CD5;</a></li>
<li><a href="#_ip">IP &#x54C8;&#x5E0C;&#x8D1F;&#x8F7D;&#x7B97;&#x6CD5;</a></li>
<li><a href="#___8">&#x88AB;&#x52A8;&#x5065;&#x5EB7;&#x68C0;&#x67E5;</a></li>
<li><a href="#__http">&#x57FA;&#x4E8E; HTTP &#x7684;&#x4E3B;&#x52A8;&#x5065;&#x5EB7;&#x68C0;&#x67E5;</a></li>
<li><a href="#__cookie">&#x57FA;&#x4E8E; Cookie &#x7684;&#x4F1A;&#x8BDD;&#x4FDD;&#x6301;</a></li>
<li><a href="#___9">&#x4E0D;&#x540C;&#x7C7B;&#x578B;&#x5E94;&#x7528;&#x7684;&#x8D1F;&#x8F7D;&#x5747;&#x8861;</a></li>
</ul>
</li>
<li><a href="#___10">&#x5185;&#x5BB9;&#x7F13;&#x5B58;</a></li>
<li><a href="#___11">&#x6027;&#x80FD;&#x4F18;&#x5316;</a>
<ul class="sectlevel2">
<li><a href="#_os">OS &#x8D44;&#x6E90;&#x9650;&#x5236;&#x8C03;&#x8BD5;</a></li>
<li><a href="#_nginx">Nginx &#x6027;&#x80FD;&#x8C03;&#x4F18;&#x4E00;&#x822C;&#x6B65;&#x9AA4;</a></li>
<li><a href="#_nginx_2">Nginx &#x65E5;&#x5FD7;</a></li>
</ul>
</li>
<li><a href="#_todo">TODO</a></li>
</ul>
</div>
<div class="sect1">
<h2 id="__">&#x57FA;&#x7840;&#x914D;&#x7F6E;</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="___2">&#x81EA;&#x5B9A;&#x4E49;&#x6B22;&#x8FCE;&#x9875;&#x9762;</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ITEM</th>
<th class="tableblock halign-left valign-top">NOTE</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x76EE;&#x7684;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>&#x9A8C;&#x8BC1;&#x81EA;&#x5B9A;&#x5236;&#x9ED8;&#x8BA4;&#x6B22;&#x8FCE;&#x9875;&#x9762;</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x6B65;&#x9AA4;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="ulist">
<ul>
<li>
<p>&#x8BBF;&#x95EE;&#x9ED8;&#x8BA4;&#x6B22;&#x8FCE;&#x9875;&#x9762;(<a href="http://192.168.100.71/" class="bare" target="_blank">http://192.168.100.71/</a>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="img/nginx-default-welcomepage.png" alt="nginx default welcomepage.png"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p>&#x81EA;&#x5B9A;&#x4E49;&#x6B22;&#x8FCE;&#x9875;&#x9762;</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>echo &quot;Hello Nginx&quot; &gt; /usr/share/nginx/html/index.html</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>&#x81EA;&#x5B9A;&#x4E49;&#x6D4B;&#x8BD5;&#x754C;&#x9762;</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>echo &quot;ok&quot; &gt; /usr/share/nginx/html/hello</pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x7ED3;&#x679C;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>&#x8BBF;&#x95EE;&#x9ED8;&#x8BA4;&#x6B22;&#x8FCE;&#x9875;&#x9762;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl http://192.168.100.71
Hello Nginx</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>&#x8BBF;&#x95EE;&#x5B9A;&#x5236;&#x6D4B;&#x8BD5;&#x9875;&#x9762;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl http://192.168.100.71/hello
ok</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_api_dashboard">API &#x53CA; Dashboard &#x80FD;&#x529B;</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ITEM</th>
<th class="tableblock halign-left valign-top">NOTE</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x76EE;&#x7684;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Nginx Plus &#x5177;&#x5907; API &#x80FD;&#x529B;&#x4EE5;&#x53CA; Dashboard &#x80FD;&#x529B;&#xFF0C;&#x53EF;&#x89C6;&#x5316;&#x5C55;&#x793A; Nginx Plus &#x81EA;&#x8EAB;&#x53CA;&#x5E94;&#x7528;&#x4EA4;&#x4ED8;&#x7684;&#x72B6;&#x6001;&#x3002;</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x6B65;&#x9AA4;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>&#x5907;&#x4EFD;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">mv /etc/nginx/conf.d/default.conf /etc/nginx/conf.d/default.conf.bak.$(date <span class="hljs-string">&quot;+%Y%m%d%H%M%S&quot;</span>)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>&#x65B0;&#x5EFA; default.conf &#x6587;&#x4EF6;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">cat &lt;&lt; EOF &gt; /etc/nginx/conf.d/default.conf
server {
    listen 8081;
    location /api {
      <span class="hljs-comment"># limit_except GET {</span>
      <span class="hljs-comment">#    auth_basic &quot;NGINX Plus API&quot;;</span>
      <span class="hljs-comment">#    auth_basic_user_file /path/to/passwd/file;</span>
      <span class="hljs-comment"># }</span>
       api write=on;
        <span class="hljs-comment">#access_log off;</span>
    }

    location = /dashboard.html {
        root   /usr/share/nginx/html;
        access_<span class="hljs-built_in">log</span> off;
    }
    location /swagger-ui {
        root   /usr/share/nginx/html;
    }
}
EOF</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">nginx <span class="hljs-_">-s</span> reload</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x7ED3;&#x679C;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="ulist">
<ul>
<li>
<p>API - <a href="http://192.168.100.71:8081/swagger-ui/" class="bare" target="_blank">http://192.168.100.71:8081/swagger-ui/</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="img/nginx-api.png" alt="nginx api.png"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Dashboard - <a href="http://192.168.100.71:8081/dashboard.html" class="bare" target="_blank">http://192.168.100.71:8081/dashboard.html</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="img/nginx-dashboard.png" alt="nginx dashboard.png"></span></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="___3">&#x8D1F;&#x8F7D;&#x5747;&#x8861;</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="___4">&#x6D41;&#x91CF;&#x8F6C;&#x53D1;&#x4E2D;&#x7684;&#x884C;&#x4E3A;</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ITEM</th>
<th class="tableblock halign-left valign-top">NOTE</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x7A7A;&#x503C;&#x62A5;&#x6587;&#x5934;&#x5C5E;&#x6027;&#x9ED8;&#x8BA4;&#x88AB;&#x4E22;&#x5F03;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>&#x4F20;&#x9012;&#x7A7A;&#x7684; X-Forwarded-For HTTP &#x5934;&#x8BBF;&#x95EE;&#xFF0C;&#x901A;&#x8FC7;&#x5E94;&#x7528;&#x67E5;&#x770B; HTTP &#x8BF7;&#x6C42;&#x5934;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl http://192.168.100.71:8002/foo -H <span class="hljs-string">&quot;X-Forwarded-For: &quot;</span>

    Request Headers: {host=[forwardhttp], connection=[close], user-agent=[curl/7.64.1], accept=[*/*]}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>&#x4F20;&#x9012;&#x975E;&#x7A7A;&#x7684; X-Forwarded-For HTTP &#x5934;&#x8BBF;&#x95EE;&#xFF0C;&#x901A;&#x8FC7;&#x5E94;&#x7528;&#x67E5;&#x770B; HTTP &#x8BF7;&#x6C42;&#x5934;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl http://192.168.100.71:8002/foo -H <span class="hljs-string">&quot;X-Forwarded-For: 1.1.1.1&quot;</span>

    Request Headers: {host=[forwardhttp], connection=[close], x-forwarded-for=[1.1.1.1], user-agent=[curl/7.64.1], accept=[*/*]}</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x5305;&#x542B;&#x4E0B;&#x5212;&#x7EBF;&#x201D;_&#x201D;&#x7684;&#x62A5;&#x6587;&#x5934;&#x5C06;&#x4F1A;&#x88AB;&#x9759;&#x9ED8;&#x4E22;&#x5F03;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>&#x4F20;&#x9012;&#x5305;&#x542B;&#x4E0B;&#x5212;&#x7EBF;&#x7684;&#x62A5;&#x6587;&#x5934;&#x5C5E;&#x6027;&#x8BBF;&#x95EE;&#x670D;&#x52A1;&#xFF0C;&#x901A;&#x8FC7;&#x5E94;&#x7528;&#x67E5;&#x770B; HTTP &#x8BF7;&#x6C42;&#x5934;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl http://192.168.100.71:8001/foo -H <span class="hljs-string">&quot;underscores_in_headers: test&quot;</span>

    Request Headers: {host=[backendL7HTTP], connection=[close], user-agent=[curl/7.64.1], accept=[*/*]}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>&#x5728; Server &#x4E2D;&#x914D;&#x7F6E;<code>underscores_in_headers on</code>&#x540E;&#x518D;&#x6B21;&#x6267;&#x884C;&#x4E0A;&#x9762;&#x64CD;&#x4F5C;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl http://192.168.100.71:8001/foo -H <span class="hljs-string">&quot;underscores_in_headers: test&quot;</span>

    Request Headers: {host=[backendL7HTTP], connection=[close], underscores_<span class="hljs-keyword">in</span>_headers=[<span class="hljs-built_in">test</span>], user-agent=[curl/7.64.1], accept=[*/*]}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>&#x5982;&#x4E0B;&#x914D;&#x7F6E;&#x662F;&#x5426;&#x5DE5;&#x4F5C;&#xFF1F;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">upstream backendL7_HTTP {
  zone upstream_backend 64k;
  server 10.1.10.6:8080 ;
  server 10.1.10.7:8080 ;
  server 10.1.10.8:8080 ;
}

match server_ok {
  status 200-399;
  body ~ <span class="hljs-string">&quot;ok&quot;</span>;
}

server {
  listen 8001;
  status_zone server_backend;
  location / {
    status_zone location_backend;
    proxy_pass http://backendL7_HTTP;
    health_check uri=/health match=server_ok interval=10 fails=3 passes=1;
  }
}</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Host &#x62A5;&#x6587;&#x5934;&#x66FF;&#x6362;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>&#x76F4;&#x63A5;&#x8BBF;&#x95EE;&#x670D;&#x52A1;&#xFF0C;Host &#x503C;&#x4E3A; 10.1.10.8:8080</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl http://10.1.10.8:8080/foo

    Request Headers: {host=[10.1.10.8:8080], user-agent=[curl/7.64.1], accept=[*/*]}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>&#x901A;&#x8FC7;&#x4EE3;&#x7406;&#x8BBF;&#x95EE;&#x670D;&#x52A1;&#xFF0C;Host &#x503C;&#x4FEE;&#x6539;&#x4E3A; forwardhttp&#xFF0C;Host&#x62A5;&#x6587;&#x5934;&#x4F1A;&#x88AB;&#x91CD;&#x5199;&#x4E3A;$proxy_host&#x53D8;&#x91CF;&#x503C;&#xFF0C;&#x8BE5;&#x53D8;&#x91CF;&#x503C;&#x4E3A;proxy_pass&#x6307;&#x4EE4;&#x4E2D;&#x6240;&#x5305;&#x542B;&#x7684;&#x57DF;&#x540D;&#x6216; ip &#x5730;&#x5740;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl http://192.168.100.71:8002/foo

    Request Headers: {host=[forwardhttp], connection=[close], user-agent=[curl/7.64.1], accept=[*/*]}</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conntection&#x62A5;&#x6587;&#x5934;&#x5C06;&#x4F1A;&#x88AB;&#x4FEE;&#x6539;&#x4E3A; close&#xFF0C;HTTP 1.1 &#x5C06;&#x4F1A;&#x88AB;&#x4FEE;&#x6539;&#x4E3A; HTTP 1.0</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>&#x6D4F;&#x89C8;&#x5668;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;&#x670D;&#x52A1;&#xFF0C;Conntection &#x53CA; Protocol &#x4FE1;&#x606F;&#x5982;&#x4E0B;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">    Protocol: HTTP/1.1

    Request Headers: {host=[10.1.10.6:8080], connection=[keep-alive]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>&#x6D4F;&#x89C8;&#x5668;&#x901A;&#x8FC7;&#x4EE3;&#x7406;&#x8BBF;&#x95EE;&#x670D;&#x52A1;&#xFF0C;Conntection &#x53CA; Protocol &#x4FE1;&#x606F;&#x5982;&#x4E0B;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">    Protocol: HTTP/1.0

    Request Headers: {host=[forwardhttp], connection=[close]</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="__ip">&#x670D;&#x52A1;&#x5668;&#x83B7;&#x53D6;&#x771F;&#x5B9E;&#x5BA2;&#x6237;&#x7AEF;IP</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ITEM</th>
<th class="tableblock halign-left valign-top">NOTE</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x76EE;&#x7684;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Nginx Plus &#x4E0B;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x5982;&#x4F55;&#x83B7;&#x53D6;&#x771F;&#x5B9E;&#x5BA2;&#x6237;&#x7AEF; IP</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="___5">&#x8F6E;&#x8BE2;&#x8D1F;&#x8F7D;&#x7B97;&#x6CD5;</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ITEM</th>
<th class="tableblock halign-left valign-top">NOTE</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x76EE;&#x7684;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Nginx Plus &#x652F;&#x6301;&#x8F6E;&#x8BE2;&#x7684;&#x8C03;&#x5EA6;&#x7B97;&#x6CD5;</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x6B65;&#x9AA4;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>&#x9ED8;&#x8BA4;&#x7B97;&#x6CD5;&#x4E3A;&#x8F6E;&#x8BE2;&#xFF0C;&#x65B0;&#x5EFA;&#x914D;&#x7F6E;&#x6587;&#x4EF6;rr.conf</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">cat &lt;&lt; EOF &gt; /etc/nginx/conf.d/rr.conf
upstream backend {
  zone upstream_backend 64k;
  server 10.1.10.6:8080;
  server 10.1.10.7:8080;
  server 10.1.10.8:8080;
}
server {
  listen 8082;
  status_zone server_backend;
  location / {
    status_zone location_backend;
    proxy_pass http://backend;
  }
}
EOF</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">nginx <span class="hljs-_">-s</span> reload</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x7ED3;&#x679C;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>&#x547D;&#x4EE4;&#x884C;&#x8BBF;&#x95EE;&#x6D4B;&#x8BD5;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> {1..100} ; <span class="hljs-keyword">do</span> curl http://192.168.100.71:8082/ <span class="hljs-_">-s</span> ; <span class="hljs-keyword">done</span>
    Server Hostname: server-1
    Server Hostname: server-2
    Server Hostname: server-3
    Server Hostname: server-1
    Server Hostname: server-2
    Server Hostname: server-3</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Dashboard &#x4E0A;&#x67E5;&#x770B;&#x7EDF;&#x8BA1;&#x6570;&#x636E;</strong></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="img/nginx-lb-rr.png" alt="nginx lb rr.png"></span></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="___6">&#x6700;&#x5C0F;&#x8FDE;&#x63A5;&#x6570;&#x8D1F;&#x8F7D;&#x7B97;&#x6CD5;</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ITEM</th>
<th class="tableblock halign-left valign-top">NOTE</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x76EE;&#x7684;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Nginx Plus &#x652F;&#x6301;&#x6700;&#x5C0F;&#x8FDE;&#x63A5;&#x6570;&#x7684;&#x8C03;&#x5EA6;&#x7B97;&#x6CD5;</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x6B65;&#x9AA4;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>&#x65B0;&#x5EFA;&#x914D;&#x7F6E;&#x6587;&#x4EF6; least.conf</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">cat &lt;&lt; EOF &gt; /etc/nginx/conf.d/least.conf
upstream backendLeast {
  zone upstream_backend 64k;
  least_conn;
  server 10.1.10.6:8080;
  server 10.1.10.7:8080;
  server 10.1.10.8:8080;
}
server {
  listen 8083;
  status_zone server_backend;
  location / {
    status_zone location_backend;
    proxy_pass http://backendLeast;
  }
}
EOF</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">nginx <span class="hljs-_">-s</span> reload</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x7ED3;&#x679C;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>&#x547D;&#x4EE4;&#x884C;&#x8BBF;&#x95EE;&#x6D4B;&#x8BD5;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> {1..100} ; <span class="hljs-keyword">do</span> curl http://192.168.100.71:8083/ <span class="hljs-_">-s</span> ; <span class="hljs-keyword">done</span>
    Server Hostname: server-1
    Server Hostname: server-2
    Server Hostname: server-3
    Server Hostname: server-1
    Server Hostname: server-2
    Server Hostname: server-3</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Dashboard &#x4E0A;&#x67E5;&#x770B;&#x7EDF;&#x8BA1;&#x6570;&#x636E;</strong></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="img/nginx-lb-least.png" alt="nginx lb least.png"></span></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="___7">&#x6743;&#x91CD;&#x4E0E;&#x4F18;&#x5148;&#x7EA7;&#x8D1F;&#x8F7D;&#x7B97;&#x6CD5;</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ITEM</th>
<th class="tableblock halign-left valign-top">NOTE</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x76EE;&#x7684;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Nginx Plus &#x652F;&#x6301;&#x6743;&#x91CD;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x8C03;&#x5EA6;&#x7B97;&#x6CD5;</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x6B65;&#x9AA4;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>&#x65B0;&#x5EFA;&#x914D;&#x7F6E;&#x6587;&#x4EF6; weight.conf</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">cat &lt;&lt; EOF &gt; /etc/nginx/conf.d/weight.conf
upstream backendWeight {
  zone upstream_backend 64k;
  server 10.1.10.6:8080 weight=5;
  server 10.1.10.7:8080 weight=2;
  server 10.1.10.8:8080 backup;
}
server {
  listen 8084;
  status_zone server_backend;
  location / {
    status_zone location_backend;
    proxy_pass http://backendWeight;
  }
}
EOF</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">nginx <span class="hljs-_">-s</span> reload</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x7ED3;&#x679C;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>&#x547D;&#x4EE4;&#x884C;&#x8BBF;&#x95EE;&#x6D4B;&#x8BD5;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> {1..100} ; <span class="hljs-keyword">do</span> curl http://192.168.100.71:8084/ <span class="hljs-_">-s</span> ; <span class="hljs-keyword">done</span>
    Server Hostname: server-1
    Server Hostname: server-2
    Server Hostname: server-1
    Server Hostname: server-1
    Server Hostname: server-1
    Server Hostname: server-2
    Server Hostname: server-1
    Server Hostname: server-1</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Dashboard &#x4E0A;&#x67E5;&#x770B;&#x7EDF;&#x8BA1;&#x6570;&#x636E;</strong></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="img/nginx-lb-weight.png" alt="nginx lb weight.png"></span></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_ip">IP &#x54C8;&#x5E0C;&#x8D1F;&#x8F7D;&#x7B97;&#x6CD5;</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ITEM</th>
<th class="tableblock halign-left valign-top">NOTE</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x76EE;&#x7684;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Nginx Plus &#x652F;&#x6301; IP &#x54C8;&#x5E0C;&#x8C03;&#x5EA6;&#x7B97;&#x6CD5;</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x6B65;&#x9AA4;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>&#x65B0;&#x5EFA;&#x914D;&#x7F6E;&#x6587;&#x4EF6; iphash.conf</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">cat &lt;&lt; EOF &gt; /etc/nginx/conf.d/iphash.conf
upstream backendIPHash {
  zone upstream_backend 64k;
  ip_<span class="hljs-built_in">hash</span>;
  server 10.1.10.6:8080 ;
  server 10.1.10.7:8080 ;
  server 10.1.10.8:8080 down;
}
server {
  listen 8085;
  status_zone server_backend;
  location / {
    status_zone location_backend;
    proxy_pass http://backendIPHash;
  }
}
EOF</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">nginx <span class="hljs-_">-s</span> reload</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x7ED3;&#x679C;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>&#x547D;&#x4EE4;&#x884C;&#x8BBF;&#x95EE;&#x6D4B;&#x8BD5;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> {1..100} ; <span class="hljs-keyword">do</span> curl http://192.168.100.71:8085/ <span class="hljs-_">-s</span> ; <span class="hljs-keyword">done</span>
    Server Hostname: server-2
    Server Hostname: server-2
    Server Hostname: server-2
    Server Hostname: server-2
    Server Hostname: server-2
    Server Hostname: server-2
    Server Hostname: server-2</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Dashboard &#x4E0A;&#x67E5;&#x770B;&#x7EDF;&#x8BA1;&#x6570;&#x636E;</strong></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="img/nginx-lb-iphash.png" alt="nginx lb iphash.png"></span></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="___8">&#x88AB;&#x52A8;&#x5065;&#x5EB7;&#x68C0;&#x67E5;</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ITEM</th>
<th class="tableblock halign-left valign-top">NOTE</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x76EE;&#x7684;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Nginx Plus &#x652F;&#x6301;&#x88AB;&#x52A8;&#x7684;&#x5065;&#x5EB7;&#x68C0;&#x67E5;</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x6B65;&#x9AA4;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>&#x65B0;&#x5EFA;&#x914D;&#x7F6E;&#x6587;&#x4EF6; health.conf</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">cat &lt;&lt; EOF &gt; /etc/nginx/conf.d/health.conf
upstream backendHealth {
  zone upstream_backend 64k;
  server 10.1.10.6:8080 max_fails=3 fail_timeout=30s;
  server 10.1.10.7:8080 max_fails=3 fail_timeout=30s;
  server 10.1.10.8:8080 max_fails=3 fail_timeout=30s;
}
server {
  listen 8086;
  status_zone server_backend;
  location / {
    status_zone location_backend;
    proxy_pass http://backendHealth;
  }
}
EOF</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">nginx <span class="hljs-_">-s</span> reload</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>&#x5173;&#x95ED;&#x670D;&#x52A1; 10.1.10.8:8080</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x7ED3;&#x679C;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>&#x547D;&#x4EE4;&#x884C;&#x8BBF;&#x95EE;&#x6D4B;&#x8BD5;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> {1..100} ; <span class="hljs-keyword">do</span> curl http://192.168.100.71:8086/ <span class="hljs-_">-s</span>  ; <span class="hljs-keyword">done</span>
    Server Hostname: server-1
    Server Hostname: server-2
    Server Hostname: server-1
    Server Hostname: server-2
    Server Hostname: server-1
    Server Hostname: server-2</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Dashboard &#x4E0A;&#x67E5;&#x770B;&#x7EDF;&#x8BA1;&#x6570;&#x636E;</strong></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="img/nginx-lb-health.png" alt="nginx lb health.png"></span></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="__http">&#x57FA;&#x4E8E; HTTP &#x7684;&#x4E3B;&#x52A8;&#x5065;&#x5EB7;&#x68C0;&#x67E5;</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ITEM</th>
<th class="tableblock halign-left valign-top">NOTE</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x76EE;&#x7684;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Nginx Plus &#x652F;&#x6301;&#x57FA;&#x4E8E; HTTP &#x7684;&#x4E3B;&#x52A8;&#x5065;&#x5EB7;&#x68C0;&#x67E5;</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x6B65;&#x9AA4;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>&#x65B0;&#x5EFA;&#x914D;&#x7F6E;&#x6587;&#x4EF6; healthHTTP.conf</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">cat &lt;&lt; EOF &gt; /etc/nginx/conf.d/healthHTTP.conf
upstream backendHelthHTTP {
  zone upstream_backend 64k;
  server 10.1.10.6:8080 ;
  server 10.1.10.7:8080 ;
  server 10.1.10.8:8080 ;
}

match server_ok {
  status 200-399;
  body ~ <span class="hljs-string">&quot;ok&quot;</span>;
}

server {
  listen 8087;
  status_zone server_backend;
  location / {
    status_zone location_backend;
    proxy_pass http://backendHelthHTTP;
    health_check uri=/health match=server_ok interval=10 fails=3 passes=1;
  }
}
EOF</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">nginx <span class="hljs-_">-s</span> reload</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>&#x5173;&#x95ED;&#x670D;&#x52A1; 10.1.10.8:8080</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x7ED3;&#x679C;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="ulist">
<ul>
<li>
<p>&#x7B49;&#x5F85; 30 &#x79D2;&#x540E;&#xFF0C;&#x5728; Dashboard &#x4E0A;&#x67E5;&#x770B;&#x7EDF;&#x8BA1;&#x6570;&#x636E;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="img/nginx-lb-health-http.png" alt="nginx lb health http.png"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p>&#x542F;&#x52A8;&#x670D;&#x52A1; 10.1.10.8:8080</p>
</li>
<li>
<p>&#x7B49;&#x5F85; 10 &#x79D2;&#x5DE6;&#x53F3;&#xFF0C;&#x5728; Dashboard &#x4E0A;&#x67E5;&#x770B;&#x7EDF;&#x8BA1;&#x6570;&#x636E;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="img/nginx-lb-health-http-recover.png" alt="nginx lb health http recover.png"></span></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="__cookie">&#x57FA;&#x4E8E; Cookie &#x7684;&#x4F1A;&#x8BDD;&#x4FDD;&#x6301;</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ITEM</th>
<th class="tableblock halign-left valign-top">NOTE</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x76EE;&#x7684;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Nginx Plus &#x652F;&#x6301;&#x57FA;&#x4E8E; Cookie &#x7684;&#x4F1A;&#x8BDD;&#x4FDD;&#x6301;</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x6B65;&#x9AA4;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>&#x65B0;&#x5EFA;&#x914D;&#x7F6E;&#x6587;&#x4EF6; persisCookie.conf</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">cat &lt;&lt; EOF &gt; /etc/nginx/conf.d/persisCookie.conf
upstream backendCookie {
  zone upstream_backend 64k;
  server 10.1.10.6:8080 ;
  server 10.1.10.7:8080 ;
  server 10.1.10.8:8080 ;
  sticky cookie srv_id expires=1h path=/;
}

server {
  listen 8088;
  status_zone server_backend;
  location / {
    status_zone location_backend;
    proxy_pass http://backendCookie;
    health_check interval=10 fails=3 passes=1;
  }
}
EOF</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">nginx <span class="hljs-_">-s</span> reload</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x7ED3;&#x679C;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="ulist">
<ul>
<li>
<p>&#x6D4F;&#x89C8;&#x5668;&#x8BBF;&#x95EE;&#x670D;&#x52A1;&#x591A;&#x6B21;&#xFF0C;&#x9A8C;&#x8BC1;&#x4F1A;&#x8BDD;&#x4FDD;&#x6301;&#x80FD;&#x529B;&#xFF0C;&#x53CA;&#x67E5;&#x770B;HTTP&#x5934;&#x4E2D; srv_id Cookie</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="img/nginx-lb-persist-cookie.png" alt="nginx lb persist cookie.png"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p>&#x5728; Dashboard &#x4E0A;&#x67E5;&#x770B;&#x7EDF;&#x8BA1;&#x6570;&#x636E;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="img/nginx-lb-persist-cookie-db.png" alt="nginx lb persist cookie db.png"></span></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="___9">&#x4E0D;&#x540C;&#x7C7B;&#x578B;&#x5E94;&#x7528;&#x7684;&#x8D1F;&#x8F7D;&#x5747;&#x8861;</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ITEM</th>
<th class="tableblock halign-left valign-top">NOTE</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x76EE;&#x7684;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Nginx Plug &#x5BF9;&#x4E0D;&#x540C;&#x5E94;&#x7528;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7684;&#x80FD;&#x529B;&#x3002;</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">L7</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>L7 &#x914D;&#x7F6E;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">cat &lt;&lt; EOF &gt; /etc/nginx/conf.d/L7HTTP.conf
upstream backendL7HTTP {
  zone upstream_backend 64k;
  server 10.1.10.6:8080 ;
  server 10.1.10.7:8080 ;
  server 10.1.10.8:8080 ;
}

match server_ok {
  status 200-399;
  body ~ <span class="hljs-string">&quot;ok&quot;</span>;
}

server {
  listen 8001;
  status_zone server_backend;
  location / {
    status_zone location_backend;
    proxy_pass http://backendL7HTTP;
    health_check uri=/health match=server_ok interval=10 fails=3 passes=1;
  }
}
EOF</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">nginx <span class="hljs-_">-s</span> reload</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>&#x8BBF;&#x95EE;&#x6D4B;&#x8BD5;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ curl -X GET <span class="hljs-string">&quot;http://192.168.100.71:8001/v3/api-docs&quot;</span> -H <span class="hljs-string">&quot;accept: application/json&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="img/nginx-lb-l7.png" alt="nginx lb l7.png"></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">L4</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><strong>&#x51C6;&#x5907;echoserver &#x5E94;&#x7528;</strong></p>
</div>
<div class="paragraph">
<p>&#x53C2;&#x7167; <a href="https://github.com/kylinsoong/networks/tree/master/echo&#xFF0C;&#x7F16;&#x8BD1;&#x51FA;" class="bare" target="_blank">https://github.com/kylinsoong/networks/tree/master/echo&#xFF0C;&#x7F16;&#x8BD1;&#x51FA;</a> <code>echoserver</code> &#x548C; <code>echoclient</code>&#x3002;</p>
</div>
<div class="listingblock">
<div class="title"><strong>&#x62F7;&#x8D1D; echoserver &#x5230;&#x4E09;&#x53F0;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x5F02;&#x5E38;&#x542F;&#x52A8; 4 &#x5C42;&#x5E94;&#x7528;&#xFF0C;&#x542F;&#x52A8;&#x540E;&#x76D1;&#x542C;&#x5728; 8877 &#x7AEF;&#x53E3;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">./echoserver</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>&#x914D;&#x7F6E;&#x6587;&#x4EF6;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">stream {

    upstream stream_backend {
        zone tcp_servers 64k;
        server 10.1.10.6:8877;
        server 10.1.10.7:8877;
        server 10.1.10.8:8877;
    }

    server {
        listen 8877;
        proxy_pass stream_backend;
        health_check interval=10 passes=1 fails=3;
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>&#x6D4B;&#x8BD5;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ ./echoclient 192.168.100.71
hi</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>&#x7EDF;&#x8BA1;&#x7ED3;&#x679C;</strong></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="img/nginx-lb-l4.png" alt="nginx lb l4.png"></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gRPC</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">*&#x51C6;&#x5907; gRPC &#x670D;&#x52A1;*</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#x8BE6;&#x7EC6;&#x53C2;&#x7167; <a href="https://grpc.io/docs/languages/go/quickstart/" class="bare" target="_blank">https://grpc.io/docs/languages/go/quickstart/</a></p>
</div>
<div class="listingblock">
<div class="title"><strong>&#x914D;&#x7F6E; grpc_gateway.conf</strong></div>
<div class="content">
<pre>log_format grpc_json escape=json &apos;{&quot;timestamp&quot;:&quot;$time_iso8601&quot;,&quot;client&quot;:&quot;$remote_addr&quot;,&apos;
                                  &apos;&quot;uri&quot;:&quot;$uri&quot;,&quot;http-status&quot;:$status,&apos;
                                  &apos;&quot;grpc-status&quot;:$grpc_status,&quot;upstream&quot;:&quot;$upstream_addr&quot;&apos;
                                  &apos;&quot;rx-bytes&quot;:$request_length,&quot;tx-bytes&quot;:$bytes_sent}&apos;;

map $upstream_trailer_grpc_status $grpc_status {
    default $upstream_trailer_grpc_status; # We normally expect to receive grpc-status as a trailer
    &apos;&apos;      $sent_http_grpc_status;        # Else use the header, regardless of who generated it
}

server {
    listen 50051 http2; # In production, comment out to disable plaintext port
    access_log   /var/log/nginx/grpc_log.json grpc_json;

    # Routing
    location /helloworld. {
        status_zone location_backend;
        grpc_pass grpc://helloworld_service;
    }

    # Error responses
    include conf.d/errors.grpc_conf; # gRPC-compliant error responses
    default_type application/grpc;   # Ensure gRPC for all error responses
}

# Backend gRPC servers
#

upstream helloworld_service {
    zone helloworld_service 64k;
    server 10.1.10.6:50051;
    server 10.1.10.7:50051;
    server 10.1.10.8:50051;
}</pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>&#x914D;&#x7F6E;errors.grpc_conf</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"><span class="hljs-comment"># Ref: https://github.com/grpc/grpc/blob/master/doc/http-grpc-status-mapping.md</span>
<span class="hljs-comment">#</span>
error_page 400 = @grpc_internal;
error_page 401 = @grpc_unauthenticated;
error_page 403 = @grpc_permission_denied;
error_page 404 = @grpc_unimplemented;
error_page 429 = @grpc_unavailable;
error_page 502 = @grpc_unavailable;
error_page 503 = @grpc_unavailable;
error_page 504 = @grpc_unavailable;

<span class="hljs-comment"># NGINX-to-gRPC status code mappings</span>
<span class="hljs-comment"># Ref: https://github.com/grpc/grpc/blob/master/doc/statuscodes.md</span>
<span class="hljs-comment">#</span>
error_page 405 = @grpc_internal; <span class="hljs-comment"># Method not allowed</span>
error_page 408 = @grpc_deadline_exceeded; <span class="hljs-comment"># Request timeout</span>
error_page 413 = @grpc_resource_exhausted; <span class="hljs-comment"># Payload too large</span>
error_page 414 = @grpc_resource_exhausted; <span class="hljs-comment"># Request URI too large</span>
error_page 415 = @grpc_internal; <span class="hljs-comment"># Unsupported media type;</span>
error_page 426 = @grpc_internal; <span class="hljs-comment"># HTTP request was sent to HTTPS port</span>
error_page 495 = @grpc_unauthenticated; <span class="hljs-comment"># Client certificate authentication error</span>
error_page 496 = @grpc_unauthenticated; <span class="hljs-comment"># Client certificate not presented</span>
error_page 497 = @grpc_internal; <span class="hljs-comment"># HTTP request was sent to mutual TLS port</span>
error_page 500 = @grpc_internal; <span class="hljs-comment"># Server error</span>
error_page 501 = @grpc_internal; <span class="hljs-comment"># Not implemented</span>

<span class="hljs-comment"># gRPC error responses</span>
<span class="hljs-comment"># Ref: https://github.com/grpc/grpc-go/blob/master/codes/codes.go</span>
<span class="hljs-comment">#</span>
location @grpc_deadline_exceeded {
    add_header grpc-status 4;
    add_header grpc-message <span class="hljs-string">&apos;deadline exceeded&apos;</span>;
    <span class="hljs-built_in">return</span> 204;
}

location @grpc_permission_denied {
    add_header grpc-status 7;
    add_header grpc-message <span class="hljs-string">&apos;permission denied&apos;</span>;
    <span class="hljs-built_in">return</span> 204;
}

location @grpc_resource_exhausted {
    add_header grpc-status 8;
    add_header grpc-message <span class="hljs-string">&apos;resource exhausted&apos;</span>;
    <span class="hljs-built_in">return</span> 204;
}

location @grpc_unimplemented {
    add_header grpc-status 12;
    add_header grpc-message unimplemented;
    <span class="hljs-built_in">return</span> 204;
}

location @grpc_internal {
    add_header grpc-status 13;
    add_header grpc-message <span class="hljs-string">&apos;internal error&apos;</span>;
    <span class="hljs-built_in">return</span> 204;
}

location @grpc_unavailable {
    add_header grpc-status 14;
    add_header grpc-message unavailable;
    <span class="hljs-built_in">return</span> 204;
}

location @grpc_unauthenticated {
    add_header grpc-status 16;
    add_header grpc-message unauthenticated;
    <span class="hljs-built_in">return</span> 204;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>&#x6D4B;&#x8BD5;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> {1..10} ; <span class="hljs-keyword">do</span> go run greeter_client/main.go ; <span class="hljs-keyword">done</span>
2021/03/30 22:39:36 Greeting: Hello world
2021/03/30 22:39:37 Greeting: Hello world
2021/03/30 22:39:38 Greeting: Hello world
2021/03/30 22:39:39 Greeting: Hello world
2021/03/30 22:39:39 Greeting: Hello world
2021/03/30 22:39:40 Greeting: Hello world
2021/03/30 22:39:41 Greeting: Hello world
2021/03/30 22:39:42 Greeting: Hello world
2021/03/30 22:39:44 Greeting: Hello world
2021/03/30 22:39:45 Greeting: Hello world</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="___10">&#x5185;&#x5BB9;&#x7F13;&#x5B58;</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ITEM</th>
<th class="tableblock halign-left valign-top">NOTE</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x76EE;&#x7684;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Nginx Plug &#x5185;&#x5BB9;&#x7F13;&#x5B58;&#x80FD;&#x529B;</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x6B65;&#x9AA4;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>&#x65B0;&#x5EFA; cache.conf &#x6587;&#x4EF6;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">cat &lt;&lt; EOF &gt; /etc/nginx/conf.d/cache.conf
EOF</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">nginx <span class="hljs-_">-s</span> reload</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x7ED3;&#x679C;</p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="___11">&#x6027;&#x80FD;&#x4F18;&#x5316;</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_os">OS &#x8D44;&#x6E90;&#x9650;&#x5236;&#x8C03;&#x8BD5;</h3>
<div class="paragraph">
<p>&#x672C;&#x90E8;&#x8BF4;&#x660E; Nginx &#x8FD0;&#x884C;&#x6240;&#x4F9D;&#x8D56; OS &#x8D44;&#x6E90;&#x9650;&#x5236;&#x8C03;&#x8BD5;&#x3002;</p>
</div>
<div class="listingblock">
<div class="title"><strong>1. CPU</strong></div>
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text"># lscpu | grep CPU
CPU op-mode(s):        32-bit, 64-bit
CPU(s):                2
On-line CPU(s) list:   0,1
CPU family:            6
Model name:            Intel(R) Xeon(R) CPU E5-2680 0 @ 2.70GHz
CPU MHz:               2699.999
NUMA node0 CPU(s):     0,1</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>2. &#x8FDB;&#x7A0B;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text"># ps -ef | grep nginx
root       955     1  0 Mar29 ?        00:00:00 nginx: master process /usr/sbin/nginx -c /etc/nginx/nginx.conf
nginx     4025   955  6 09:56 ?        00:02:07 nginx: worker process
nginx     4026   955  6 09:56 ?        00:02:07 nginx: worker process
nginx     4027   955  0 09:56 ?        00:00:00 nginx: cache manager process</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>3. &#x8D44;&#x6E90;&#x9650;&#x5236;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"><span class="hljs-keyword">for</span> <span class="hljs-built_in">limit</span> <span class="hljs-keyword">in</span> fsize cpu as memlock
<span class="hljs-keyword">do</span>
  grep <span class="hljs-string">&quot;nginx&quot;</span> /etc/security/limits.conf | grep -q <span class="hljs-variable">$limit</span> || <span class="hljs-built_in">echo</span> <span class="hljs-_">-e</span> <span class="hljs-string">&quot;nginx     hard   <span class="hljs-variable">$limit</span>    unlimited\nnginx     soft   <span class="hljs-variable">$limit</span>   unlimited&quot;</span> | sudo tee --append /etc/security/limits.conf
<span class="hljs-keyword">done</span>

<span class="hljs-keyword">for</span> <span class="hljs-built_in">limit</span> <span class="hljs-keyword">in</span> nofile noproc
<span class="hljs-keyword">do</span>
  grep <span class="hljs-string">&quot;nginx&quot;</span> /etc/security/limits.conf | grep -q <span class="hljs-variable">$limit</span> || <span class="hljs-built_in">echo</span> <span class="hljs-_">-e</span> <span class="hljs-string">&quot;nginx     hard   <span class="hljs-variable">$limit</span>    64000\nnginx     soft   <span class="hljs-variable">$limit</span>   64000&quot;</span> | sudo tee --append /etc/security/limits.conf
<span class="hljs-keyword">done</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>4. Kernel Memory &#x6587;&#x4EF6;&#x53E5;&#x67C4;&#x6570;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">grep <span class="hljs-string">&quot;file-max&quot;</span> /etc/sysctl.conf || <span class="hljs-built_in">echo</span> <span class="hljs-_">-e</span> <span class="hljs-string">&quot;fs.file-max = 70000&quot;</span> | tee --append /etc/sysctl.conf</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>5. &#x6587;&#x4EF6;&#x6253;&#x5F00;&#x6570;&#x5224;&#x65AD;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"><span class="hljs-built_in">ulimit</span> -n
lsof -p &lt;PID&gt; | wc <span class="hljs-_">-l</span>
lsof -p &lt;PID&gt;

ls <span class="hljs-_">-l</span> /proc/&lt;PID&gt;/fd | wc <span class="hljs-_">-l</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>6. &#x65E5;&#x5FD7;&#x6587;&#x4EF6;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">ls /var/<span class="hljs-built_in">log</span>/nginx/</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_nginx">Nginx &#x6027;&#x80FD;&#x8C03;&#x4F18;&#x4E00;&#x822C;&#x6B65;&#x9AA4;</h3>
<div class="paragraph">
<p>&#x672C;&#x90E8;&#x5206;&#x9A8C;&#x8BC1;&#x6027;&#x80FD;&#x8C03;&#x4F18;&#x7684;&#x4E00;&#x822C;&#x6B65;&#x9AA4;&#xFF0C;&#x4EE5;&#x53CA;&#x4E0D;&#x540C;&#x6B65;&#x9AA4;&#x5BF9; Nginx &#x6027;&#x80FD;&#x7684;&#x5F71;&#x54CD;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x9A8C;&#x8BC1;&#x62D3;&#x6251;&#x5982;&#x4E0B;&#xFF1A;</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="img/nginx-perf-arch.png" alt="nginx perf arch.png"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p>&#x5BA2;&#x6237;&#x7AEF;&#xFF1A;wrk&#x8F6F;&#x4EF6;</p>
</li>
<li>
<p>&#x53CD;&#x5411;&#x4EE3;&#x7406;&#xFF1A;&#x6027;&#x80FD;&#x4F18;&#x5316;&#x5BF9;&#x8C61;</p>
</li>
<li>
<p>Web&#x7AEF;&#xFF1A;NGINX</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>&#x4EE5;&#x4E0A;&#x6240;&#x6709;&#x8282;&#x70B9;&#x89C4;&#x683C;&#x90FD;&#x662F; 2C 4G&#x3002;</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ITEM</th>
<th class="tableblock halign-left valign-top">NOTE</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x6027;&#x80FD;</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>&#x914D;&#x7F6E;&#x5907;&#x4EFD;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">mv /etc/nginx/nginx.conf /etc/nginx/nginx.conf.bak.$(date <span class="hljs-string">&quot;+%Y%m%d%H%M%S&quot;</span>)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x6587;&#x4EF6; /etc/nginx/nginx.conf</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">user  nginx;
worker_processes  1;

error_<span class="hljs-built_in">log</span>  /var/<span class="hljs-built_in">log</span>/nginx/error.log notice;
pid        /var/run/nginx.pid;


events {
    worker_connections  1024;
}


http {
    include       /etc/nginx/mime.types;
    default_<span class="hljs-built_in">type</span>  application/octet-stream;

    <span class="hljs-built_in">log</span>_format  main  <span class="hljs-string">&apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;</span>
                      <span class="hljs-string">&apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;</span>
                      <span class="hljs-string">&apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;</span>;

    access_<span class="hljs-built_in">log</span>  /var/<span class="hljs-built_in">log</span>/nginx/access.log  main;

    sendfile        on;

    keepalive_timeout  65;


    include /etc/nginx/conf.d/*.conf;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>Server &#x914D;&#x7F6E;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">cat &lt;&lt; EOF &gt; /etc/nginx/conf.d/app.conf
upstream webserver {
  zone upstream_backend 64k;
  server 192.168.71.210:80;
}


server {
  listen 9082;
  status_zone server_backend;
  location / {
    status_zone location_backend;
    proxy_pass http://webserver;
  }
}
EOF</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>WRK &#x7ED3;&#x679C;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ wrk -t4 -c800 <span class="hljs-_">-d</span>120s http://192.168.71.211:9082
Running 2m <span class="hljs-built_in">test</span> @ http://192.168.71.211:9082
  4 threads and 800 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   161.53ms  298.21ms   2.00s    86.69%
    Req/Sec     2.58k   502.22     6.53k    74.94%
  1230598 requests <span class="hljs-keyword">in</span> 2.00m, 0.97GB <span class="hljs-built_in">read</span>
  Socket errors: connect 0, <span class="hljs-built_in">read</span> 49589, write 0, timeout 1933
Requests/sec:  10249.33
Transfer/sec:      8.31MB</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Dashboard UI &#x4E0A;&#x7EDF;&#x8BA1;&#x4FE1;&#x606F;</strong></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="img/nginx-perf-1.serverZone.png" alt="nginx perf 1.serverZone.png"></span></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>&#x4F18;&#x5316;&#x8FDE;&#x63A5;&#x6570;&#x9650;&#x5236;</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>&#x4FEE;&#x6539; worker_connections &#x4ECE;&#x9ED8;&#x8BA4; 1024 &#x5230; 10000</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">user  nginx;
worker_processes  1;

worker_rlimit_nofile 30000;

error_<span class="hljs-built_in">log</span>  /var/<span class="hljs-built_in">log</span>/nginx/error.log notice;
pid        /var/run/nginx.pid;


events {
    worker_connections  100000;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>WRK &#x6D4B;&#x8BD5;&#x7ED3;&#x679C;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ wrk -t4 -c800 <span class="hljs-_">-d</span>120s http://192.168.71.211:9082
Running 2m <span class="hljs-built_in">test</span> @ http://192.168.71.211:9082
  4 threads and 800 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   177.90ms  294.22ms   2.00s    85.21%
    Req/Sec     2.58k   585.26     6.92k    76.87%
  1231828 requests <span class="hljs-keyword">in</span> 2.00m, 0.98GB <span class="hljs-built_in">read</span>
  Socket errors: connect 0, <span class="hljs-built_in">read</span> 0, write 0, timeout 1255
Requests/sec:  10262.24
Transfer/sec:      8.32MB</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>&#x4F18;&#x5316; worker &#x6570;&#x91CF;</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>&#x4FEE;&#x6539; worker_processes &#x4ECE; 1 &#x5230; auto</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">user  nginx;
worker_processes  auto;

worker_rlimit_nofile 30000;

error_<span class="hljs-built_in">log</span>  /var/<span class="hljs-built_in">log</span>/nginx/error.log notice;
pid        /var/run/nginx.pid;


events {
    worker_connections  100000;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>WRK &#x6D4B;&#x8BD5;&#x7ED3;&#x679C;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ wrk -t4 -c800 <span class="hljs-_">-d</span>120s http://192.168.71.211:9082
Running 2m <span class="hljs-built_in">test</span> @ http://192.168.71.211:9082
  4 threads and 800 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   233.65ms  343.01ms   1.83s    80.99%
    Req/Sec     3.43k   613.32     6.02k    70.40%
  1637802 requests <span class="hljs-keyword">in</span> 2.00m, 1.30GB <span class="hljs-built_in">read</span>
  Socket errors: connect 0, <span class="hljs-built_in">read</span> 0, write 0, timeout 4351
Requests/sec:  13643.47
Transfer/sec:     11.06MB</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>&#x8FDE;&#x63A5;&#x590D;&#x7528;</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>&#x914D;&#x7F6E;&#x8FDE;&#x63A5;&#x590D;&#x7528;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">upstream webserver {
  zone upstream_backend 64k;
  server 192.168.71.210:80;
  keepalive 128;
}

server {
  listen 9082;
  status_zone server_backend;
  location / {
    status_zone location_backend;
    proxy_pass http://webserver;
    proxy_http_version 1.1;
    proxy_<span class="hljs-built_in">set</span>_header Connection <span class="hljs-string">&quot;&quot;</span>;
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>WRK &#x6D4B;&#x8BD5;&#x7ED3;&#x679C;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">wrk -t4 -c800 <span class="hljs-_">-d</span>120s http://192.168.71.211:9082
Running 2m <span class="hljs-built_in">test</span> @ http://192.168.71.211:9082
  4 threads and 800 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   103.88ms  285.25ms   2.00s    90.34%
    Req/Sec     5.82k     1.25k   14.52k    69.75%
  2779426 requests <span class="hljs-keyword">in</span> 2.00m, 2.20GB <span class="hljs-built_in">read</span>
  Socket errors: connect 0, <span class="hljs-built_in">read</span> 0, write 0, timeout 6382
  Non-2xx or 3xx responses: 249
Requests/sec:  23155.66
Transfer/sec:     18.77MB</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>CPU&#x4EB2;&#x548C;&#x53CA;worker&#x4F18;&#x5148;&#x7EA7;</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>&#x914D;&#x7F6E;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">user  nginx;
worker_processes  2;
worker_cpu_affinity 0101 1010;

worker_rlimit_nofile 30000;

error_<span class="hljs-built_in">log</span>  /var/<span class="hljs-built_in">log</span>/nginx/error.log notice;
pid        /var/run/nginx.pid;
worker_priority -20;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>WRK &#x6D4B;&#x8BD5;&#x7ED3;&#x679C;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">wrk -t4 -c800 <span class="hljs-_">-d</span>120s http://192.168.71.211:9082
Running 2m <span class="hljs-built_in">test</span> @ http://192.168.71.211:9082
  4 threads and 800 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    97.73ms  277.42ms   2.00s    90.52%
    Req/Sec     5.01k     1.46k   15.75k    78.92%
  2391712 requests <span class="hljs-keyword">in</span> 2.00m, 1.89GB <span class="hljs-built_in">read</span>
  Socket errors: connect 0, <span class="hljs-built_in">read</span> 0, write 0, timeout 5774
  Non-2xx or 3xx responses: 446
Requests/sec:  19924.37
Transfer/sec:     16.15MB</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>&#x65E5;&#x5FD7;&#x7F13;&#x5B58;</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>&#x914D;&#x7F6E;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">http {
    include       /etc/nginx/mime.types;
    default_<span class="hljs-built_in">type</span>  application/octet-stream;

    <span class="hljs-built_in">log</span>_format  main  <span class="hljs-string">&apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;</span>
                      <span class="hljs-string">&apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;</span>
                      <span class="hljs-string">&apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;</span>;

    access_<span class="hljs-built_in">log</span>  /var/<span class="hljs-built_in">log</span>/nginx/access.log  main buffer=1m;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>WRK &#x6D4B;&#x8BD5;&#x7ED3;&#x679C;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">wrk -t4 -c800 <span class="hljs-_">-d</span>120s http://192.168.71.211:9082
Running 2m <span class="hljs-built_in">test</span> @ http://192.168.71.211:9082
  4 threads and 800 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   101.26ms  281.45ms   2.00s    90.36%
    Req/Sec     5.69k     1.36k   18.52k    73.07%
  2716274 requests <span class="hljs-keyword">in</span> 2.00m, 2.15GB <span class="hljs-built_in">read</span>
  Socket errors: connect 0, <span class="hljs-built_in">read</span> 0, write 0, timeout 6294
  Non-2xx or 3xx responses: 460
Requests/sec:  22617.47
Transfer/sec:     18.33MB</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Cache</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>&#x914D;&#x7F6E;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">upstream webserver {
  zone upstream_backend 64k;
  server 192.168.71.210:80;
  keepalive 128;
}

proxy_cache_path /tmp/cache keys_zone=mycache:10m inactive=60m;

server {
  listen 9082;
  status_zone server_backend;
  location / {
    status_zone location_backend;
    proxy_pass http://webserver;
    proxy_http_version 1.1;
    proxy_<span class="hljs-built_in">set</span>_header Connection <span class="hljs-string">&quot;&quot;</span>;
    proxy_cache_key <span class="hljs-variable">$host</span>:<span class="hljs-variable">$server_port</span><span class="hljs-variable">$request_uri</span>;
    proxy_cache_valid 200 304 1h;
    proxy_cache mycache;
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>WRK &#x6D4B;&#x8BD5;&#x7ED3;&#x679C;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">wrk -t4 -c800 <span class="hljs-_">-d</span>120s http://192.168.71.211:9082
Running 2m <span class="hljs-built_in">test</span> @ http://192.168.71.211:9082
  4 threads and 800 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    40.12ms  127.31ms   1.95s    91.85%
    Req/Sec    12.16k     2.64k   27.87k    75.58%
  5806262 requests <span class="hljs-keyword">in</span> 2.00m, 4.60GB <span class="hljs-built_in">read</span>
  Socket errors: connect 0, <span class="hljs-built_in">read</span> 189, write 0, timeout 275
Requests/sec:  48372.99
Transfer/sec:     39.21MB</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>gzip&#x538B;&#x7F29;</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>&#x914D;&#x7F6E;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">http {

    ...

    gzip_min_length 500;
    gzip_buffers 4 256k;
    gzip_http_version 1.1;
    gzip_comp_level 1;
    gzip_types  text/plain application/javascript application/x-javascript text/javascript text/css application/xml application/xml+rss;
    gzip_vary on;
    gzip_proxied expired no-cache no-store private auth;
    gzip_<span class="hljs-built_in">disable</span> <span class="hljs-string">&quot;MSIE [1-6]\.&quot;</span>;

    include /etc/nginx/conf.d/*.conf;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>WRK &#x6D4B;&#x8BD5;&#x7ED3;&#x679C;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">wrk -t4 -c800 <span class="hljs-_">-d</span>120s http://192.168.71.211:9082 -H <span class="hljs-string">&quot;Accept-Encoding: gzip&quot;</span>
Running 2m <span class="hljs-built_in">test</span> @ http://192.168.71.211:9082
  4 threads and 800 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    43.31ms  133.73ms   1.99s    91.62%
    Req/Sec    11.39k     1.98k   25.52k    76.48%
  5441588 requests <span class="hljs-keyword">in</span> 2.00m, 4.31GB <span class="hljs-built_in">read</span>
  Socket errors: connect 0, <span class="hljs-built_in">read</span> 100, write 0, timeout 287
Requests/sec:  45319.05
Transfer/sec:     36.73MB</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>&#x4F18;&#x5316;CPU&#x5F00;&#x9500;</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>&#x914D;&#x7F6E;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ wrk -t4 -c800 <span class="hljs-_">-d</span>120s http://192.168.71.211:9082
Running 2m <span class="hljs-built_in">test</span> @ http://192.168.71.211:9082
  4 threads and 800 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    16.74ms    4.96ms 225.93ms   88.98%
    Req/Sec    12.03k     0.97k   25.52k    85.44%
  5747729 requests <span class="hljs-keyword">in</span> 2.00m, 4.55GB <span class="hljs-built_in">read</span>
Requests/sec:  47866.76
Transfer/sec:     38.80MB</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_nginx_2">Nginx &#x65E5;&#x5FD7;</h3>
<div class="paragraph">
<p>&#x672C;&#x90E8;&#x8BF4;&#x660E; Nginx &#x65E5;&#x5FD7;&#x3002;</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ITEM</th>
<th class="tableblock halign-left valign-top">NOTE</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x65E5;&#x5FD7;&#x7EA7;&#x522B;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>Nginx &#x652F;&#x6301;&#x7684;&#x65E5;&#x5FD7;&#x7EA7;&#x522B;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">debug &gt; info &gt; notice &gt; warn &gt; error &gt; crit &gt; alert &gt; emerg</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#x9ED8;&#x8BA4;Nginx&#x5F00;&#x542F;&#x7684;&#x65E5;&#x5FD7;&#x7EA7;&#x522B;&#x4E3A;notice&#x3002;</p>
</div>
<div class="listingblock">
<div class="title"><strong>&#x8BBE;&#x5B9A; Nginx &#x65E5;&#x5FD7;&#x7EA7;&#x522B;&#x4E3A; debug</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">error_<span class="hljs-built_in">log</span>  /var/<span class="hljs-built_in">log</span>/nginx/error.log debug;</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access &#x65E5;&#x5FD7;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>&#x683C;&#x5F0F;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">http {
    include       /etc/nginx/mime.types;
    default_<span class="hljs-built_in">type</span>  application/octet-stream;

    <span class="hljs-built_in">log</span>_format json_combined escape=json
        <span class="hljs-string">&apos;{&apos;</span>
          <span class="hljs-string">&apos;&quot;time_local&quot;: &quot;$time_local&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;remote_addr&quot;: &quot;$remote_addr&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;remote_user&quot;: &quot;$remote_user&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;request&quot;: &quot;$request&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;status&quot;: &quot;$status&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;body_bytes_sent&quot;: &quot;$body_bytes_sent&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;request_time&quot;: &quot;$request_time&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;http_referrer&quot;: &quot;$http_referer&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;http_x_forward_for&quot;: &quot;$http_x_forward_for&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;http_user_agent&quot;: &quot;$http_user_agent&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;nginx_version&quot;: &quot;$nginx_version&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;pid&quot;: &quot;$pid&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;connections_active&quot;: &quot;$connections_active&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;connections_reading&quot;: &quot;$connections_reading&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;connections_writing&quot;: &quot;$connections_writing&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;connections_waiting&quot;: &quot;$connections_waiting&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;host&quot;: &quot;$host&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;upstream_addr&quot;: &quot;$upstream_addr&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;upstream_bytes_sent&quot;: &quot;$upstream_bytes_sent&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;upstream_bytes_received&quot;: &quot;$upstream_bytes_received&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;upstream_connect_time&quot;: &quot;$upstream_connect_time&quot;, &apos;</span>
        <span class="hljs-string">&apos;}&apos;</span>;

    access_<span class="hljs-built_in">log</span>  /var/<span class="hljs-built_in">log</span>/nginx/access.log json_combined;</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#x5B8C;&#x6574;&#x53D8;&#x91CF;&#x5217;&#x8868;&#x53C2;&#x7167;&#xFF1A;http://nginx.org/en/docs/varindex.html</p>
</div>
<div class="listingblock">
<div class="title"><strong>&#x65E5;&#x5FD7;&#x8F93;&#x51FA;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
   <span class="hljs-string">&quot;time_local&quot;</span>:<span class="hljs-string">&quot;30/Mar/2021:16:56:40 +0800&quot;</span>,
   <span class="hljs-string">&quot;remote_addr&quot;</span>:<span class="hljs-string">&quot;192.168.71.212&quot;</span>,
   <span class="hljs-string">&quot;remote_user&quot;</span>:<span class="hljs-string">&quot;&quot;</span>,
   <span class="hljs-string">&quot;request&quot;</span>:<span class="hljs-string">&quot;GET / HTTP/1.1&quot;</span>,
   <span class="hljs-string">&quot;status&quot;</span>:<span class="hljs-string">&quot;200&quot;</span>,
   <span class="hljs-string">&quot;body_bytes_sent&quot;</span>:<span class="hljs-string">&quot;612&quot;</span>,
   <span class="hljs-string">&quot;request_time&quot;</span>:<span class="hljs-string">&quot;0.000&quot;</span>,
   <span class="hljs-string">&quot;http_referrer&quot;</span>:<span class="hljs-string">&quot;&quot;</span>,
   <span class="hljs-string">&quot;http_x_forward_for&quot;</span>:<span class="hljs-string">&quot;&quot;</span>,
   <span class="hljs-string">&quot;http_user_agent&quot;</span>:<span class="hljs-string">&quot;&quot;</span>,
   <span class="hljs-string">&quot;nginx_version&quot;</span>:<span class="hljs-string">&quot;1.19.5&quot;</span>,
   <span class="hljs-string">&quot;pid&quot;</span>:<span class="hljs-string">&quot;4566&quot;</span>,
   <span class="hljs-string">&quot;connections_active&quot;</span>:<span class="hljs-string">&quot;808&quot;</span>,
   <span class="hljs-string">&quot;connections_reading&quot;</span>:<span class="hljs-string">&quot;0&quot;</span>,
   <span class="hljs-string">&quot;connections_writing&quot;</span>:<span class="hljs-string">&quot;1&quot;</span>,
   <span class="hljs-string">&quot;connections_waiting&quot;</span>:<span class="hljs-string">&quot;806&quot;</span>,
   <span class="hljs-string">&quot;host&quot;</span>:<span class="hljs-string">&quot;192.168.71.211&quot;</span>,
   <span class="hljs-string">&quot;upstream_addr&quot;</span>:<span class="hljs-string">&quot;&quot;</span>,
   <span class="hljs-string">&quot;upstream_bytes_sent&quot;</span>:<span class="hljs-string">&quot;&quot;</span>,
   <span class="hljs-string">&quot;upstream_bytes_received&quot;</span>:<span class="hljs-string">&quot;&quot;</span>,
   <span class="hljs-string">&quot;upstream_connect_time&quot;</span>:<span class="hljs-string">&quot;&quot;</span>
}</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">IP &#x548C;&#x7AEF;&#x53E3;&#x8C03;&#x8BD5;</p></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="title"><strong>&#x914D;&#x7F6E;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">upstream forwardhttp {
  zone upstream_backend 64k;
  server 10.1.10.6:8080 ;
  server 10.1.10.7:8080 ;
  server 10.1.10.8:8080 ;
}

<span class="hljs-built_in">log</span>_format json_combined escape=json
        <span class="hljs-string">&apos;{&apos;</span>
          <span class="hljs-string">&apos;&quot;time_local&quot;: &quot;$time_local&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;host&quot;: &quot;$host&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;http_host&quot;: &quot;$http_host&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;proxy_host&quot;: &quot;$proxy_host&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;proxy_port&quot;: &quot;$proxy_port&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;proxy_protocol_addr&quot;: &quot;$proxy_protocol_addr&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;proxy_protocol_port&quot;: &quot;$proxy_protocol_port&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;proxy_protocol_server_addr&quot;: &quot;$proxy_protocol_server_addr&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;proxy_protocol_server_port&quot;: &quot;$proxy_protocol_server_port&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;realip_remote_addr&quot;: &quot;$realip_remote_addr&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;realip_remote_port&quot;: &quot;$realip_remote_port&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;remote_addr&quot;: &quot;$remote_addr&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;remote_port&quot;: &quot;$remote_port&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;server_addr&quot;: &quot;$server_addr&quot;, &apos;</span>
          <span class="hljs-string">&apos;&quot;server_port&quot;: &quot;$server_port&quot;, &apos;</span>
        <span class="hljs-string">&apos;}&apos;</span>;


server {
  listen 8002;
  status_zone server_backend;
  access_<span class="hljs-built_in">log</span>  /var/<span class="hljs-built_in">log</span>/nginx/forward-access.log json_combined;
  location / {
    status_zone location_backend;
    proxy_pass http://forwardhttp;
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>&#x65E5;&#x5FD7;&#x8F93;&#x51FA;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  <span class="hljs-string">&quot;time_local&quot;</span>: <span class="hljs-string">&quot;31/Mar/2021:10:43:58 +0800&quot;</span>,
  <span class="hljs-string">&quot;host&quot;</span>: <span class="hljs-string">&quot;192.168.100.71&quot;</span>,
  <span class="hljs-string">&quot;http_host&quot;</span>: <span class="hljs-string">&quot;192.168.100.71:8002&quot;</span>,
  <span class="hljs-string">&quot;proxy_host&quot;</span>: <span class="hljs-string">&quot;forwardhttp&quot;</span>,
  <span class="hljs-string">&quot;proxy_port&quot;</span>: <span class="hljs-string">&quot;80&quot;</span>,
  <span class="hljs-string">&quot;proxy_protocol_addr&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,
  <span class="hljs-string">&quot;proxy_protocol_port&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,
  <span class="hljs-string">&quot;proxy_protocol_server_addr&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,
  <span class="hljs-string">&quot;proxy_protocol_server_port&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,
  <span class="hljs-string">&quot;realip_remote_addr&quot;</span>: <span class="hljs-string">&quot;192.168.100.1&quot;</span>,
  <span class="hljs-string">&quot;realip_remote_port&quot;</span>: <span class="hljs-string">&quot;49594&quot;</span>,
  <span class="hljs-string">&quot;remote_addr&quot;</span>: <span class="hljs-string">&quot;192.168.100.1&quot;</span>,
  <span class="hljs-string">&quot;remote_port&quot;</span>: <span class="hljs-string">&quot;49594&quot;</span>,
  <span class="hljs-string">&quot;server_addr&quot;</span>: <span class="hljs-string">&quot;192.168.100.71&quot;</span>,
  <span class="hljs-string">&quot;server_port&quot;</span>: <span class="hljs-string">&quot;8002&quot;</span>
}</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_todo">TODO</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ITEM</th>
<th class="tableblock halign-left valign-top">NOTE</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x76EE;&#x7684;</p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x6B65;&#x9AA4;</p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x7ED3;&#x679C;</p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ITEM</th>
<th class="tableblock halign-left valign-top">NOTE</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x76EE;&#x7684;</p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x6B65;&#x9AA4;</p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x7ED3;&#x679C;</p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ITEM</th>
<th class="tableblock halign-left valign-top">NOTE</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x76EE;&#x7684;</p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x6B65;&#x9AA4;</p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x7ED3;&#x679C;</p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ITEM</th>
<th class="tableblock halign-left valign-top">NOTE</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x76EE;&#x7684;</p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x6B65;&#x9AA4;</p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x7ED3;&#x679C;</p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ITEM</th>
<th class="tableblock halign-left valign-top">NOTE</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x76EE;&#x7684;</p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x6B65;&#x9AA4;</p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x7ED3;&#x679C;</p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ITEM</th>
<th class="tableblock halign-left valign-top">NOTE</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x76EE;&#x7684;</p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x6B65;&#x9AA4;</p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#x7ED3;&#x679C;</p></td>
<td class="tableblock halign-left valign-top"><div></div></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">**</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"></code></pre>
</div>
</div>
</div>
</div>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="apidrive.html" class="navigation navigation-prev " aria-label="Previous page: API">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="docker.html" class="navigation navigation-next " aria-label="Next page: Docker">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"用例","level":"1.4.4","depth":2,"next":{"title":"Docker","level":"1.4.4.1","depth":3,"path":"nginx/docker.adoc","ref":"nginx/docker.adoc","articles":[]},"previous":{"title":"API","level":"1.4.3.1","depth":3,"path":"nginx/apidrive.adoc","ref":"nginx/apidrive.adoc","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{"copyrightYear":"2019","copyrightHolder":"Kylin Soong"},"plugins":["collapsible-menu","donate","-sharing","sharing-plus","splitter","back-to-top-button","edit-link"],"pluginsConfig":{"tbfed-pagefooter":{"copyright":"Copyright &copy Kylin Soong 2019","modify_label":"该文件修订时间：","modify_format":"YYYY-MM-DD HH:mm:ss"},"collapsible-menu":{},"splitter":{},"search":{},"sharing-plus":{"qq":false,"all":["facebook","google","twitter","instapaper","linkedin","pocket","stumbleupon"],"douban":false,"facebook":true,"weibo":false,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":true,"messenger":false,"line":false,"vk":false,"pocket":true,"google":false,"viber":false,"stumbleupon":false,"qzone":false,"linkedin":false},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"donate":{"alipay":"http://ksoong.org/docs/content/images/alipay.png","alipayText":"支付宝捐赠","button":"赞赏","title":"","wechat":"http://ksoong.org/docs/content/images/wechat.png","wechatText":"微信捐赠"},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"back-to-top-button":{},"sharing":{"weibo":true,"linkedin":true,"google":true,"facebook":true,"all":["facebook","google","linkedin","weibo"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/kylinsoong/docs/blob/gh-pages"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css"}},"file":{"path":"nginx/usecase.adoc","mtime":"2021-03-31T03:36:13.651Z","type":"asciidoc"},"gitbook":{"version":"3.2.3","time":"2021-04-01T03:32:42.553Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-collapsible-menu/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-donate/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing-plus/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

