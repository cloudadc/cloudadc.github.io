
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>SWITCHING · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-back-to-top-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../styles/website.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="ovs-routing.html" />
    
    
    <link rel="prev" href="ovs.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    ABOUT
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../k8s-ingress/">
            
                <a href="../k8s-ingress/">
            
                    
                    CONTAINER INGRESS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../k8s-ingress/f5-cis/">
            
                <a href="../k8s-ingress/f5-cis/">
            
                    
                    F5 CIS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="../k8s-ingress/f5-cis/install.html">
            
                <a href="../k8s-ingress/f5-cis/install.html">
            
                    
                    安装
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1.1" data-path="../k8s-ingress/f5-cis/solutions/flannel-etcd-mode.html">
            
                <a href="../k8s-ingress/f5-cis/solutions/flannel-etcd-mode.html">
            
                    
                    Flannel etcd mode
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.1.2" data-path="../k8s-ingress/f5-cis/config.html">
            
                <a href="../k8s-ingress/f5-cis/config.html">
            
                    
                    配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.3" data-path="../k8s-ingress/f5-cis/as3/">
            
                <a href="../k8s-ingress/f5-cis/as3/">
            
                    
                    AS3
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.3.1" data-path="../k8s-ingress/f5-cis/as3/canary/">
            
                <a href="../k8s-ingress/f5-cis/as3/canary/">
            
                    
                    Canary Releasing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.3.2" data-path="../k8s-ingress/f5-cis/as3/ws/">
            
                <a href="../k8s-ingress/f5-cis/as3/ws/">
            
                    
                    WebSocket
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.3.3" data-path="../k8s-ingress/f5-cis/as3/hubmode/">
            
                <a href="../k8s-ingress/f5-cis/as3/hubmode/">
            
                    
                    HubMode
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.1.4" data-path="../k8s-ingress/f5-cis/ingress/">
            
                <a href="../k8s-ingress/f5-cis/ingress/">
            
                    
                    Ingress
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.5" data-path="../k8s-ingress/f5-cis/cccl/">
            
                <a href="../k8s-ingress/f5-cis/cccl/">
            
                    
                    CCCL
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.6" data-path="../k8s-ingress/f5-cis/mgmt-isolation/">
            
                <a href="../k8s-ingress/f5-cis/mgmt-isolation/">
            
                    
                    管理隔离
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../k8s-ingress/nginx-ingress/">
            
                <a href="../k8s-ingress/nginx-ingress/">
            
                    
                    NGINX
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.1" data-path="../k8s-ingress/nginx-ingress/bigip/">
            
                <a href="../k8s-ingress/nginx-ingress/bigip/">
            
                    
                    Deployment Architectures
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../k8s-ingress/nginx-plus-ingress/">
            
                <a href="../k8s-ingress/nginx-plus-ingress/">
            
                    
                    NGINX PLUS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.3.1" data-path="../k8s-ingress/nginx-plus-ingress/monitor/dashboard.html">
            
                <a href="../k8s-ingress/nginx-plus-ingress/monitor/dashboard.html">
            
                    
                    Monitor Dashboard
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.2" data-path="../k8s-ingress/nginx-plus-ingress/bigip/">
            
                <a href="../k8s-ingress/nginx-plus-ingress/bigip/">
            
                    
                    Deployment Architectures
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.3" data-path="../k8s-ingress/nginx-plus-ingress/l4-lb/">
            
                <a href="../k8s-ingress/nginx-plus-ingress/l4-lb/">
            
                    
                    L4 Load Balancing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.4" data-path="../k8s-ingress/nginx-plus-ingress/health-checks/">
            
                <a href="../k8s-ingress/nginx-plus-ingress/health-checks/">
            
                    
                    Active Health Checks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.5" data-path="../k8s-ingress/nginx-plus-ingress/release/">
            
                <a href="../k8s-ingress/nginx-plus-ingress/release/">
            
                    
                    Zero-Downtime Releases
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../k8s-ingress/performance/">
            
                <a href="../k8s-ingress/performance/">
            
                    
                    PERFORMANCE
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../k8s-net/">
            
                <a href="../k8s-net/">
            
                    
                    CONTAINER NETWORK
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../k8s-net/docker.html">
            
                <a href="../k8s-net/docker.html">
            
                    
                    DOCKER
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../k8s-net/k8s.html">
            
                <a href="../k8s-net/k8s.html">
            
                    
                    K8S
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1" data-path="../k8s-net/kubenet.html">
            
                <a href="../k8s-net/kubenet.html">
            
                    
                    kubenet
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.2" data-path="../k8s-net/flannel.html">
            
                <a href="../k8s-net/flannel.html">
            
                    
                    Flannel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.3" data-path="../k8s-net/Calico.html">
            
                <a href="../k8s-net/Calico.html">
            
                    
                    Calico
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="./">
            
                <a href="./">
            
                    
                    LINUX NETWORK
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="netfilter.html">
            
                <a href="netfilter.html">
            
                    
                    Netfilter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="ovs.html">
            
                <a href="ovs.html">
            
                    
                    OVS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.4.2.1" data-path="ovs-switch.html">
            
                <a href="ovs-switch.html">
            
                    
                    SWITCHING
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.2" data-path="ovs-routing.html">
            
                <a href="ovs-routing.html">
            
                    
                    ROUTING
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.3" data-path="ovs-acl.html">
            
                <a href="ovs-acl.html">
            
                    
                    ACLs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.4" data-path="ovs-nfv.html">
            
                <a href="ovs-nfv.html">
            
                    
                    NFV
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="mininet.html">
            
                <a href="mininet.html">
            
                    
                    Mininet
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../cloud/">
            
                <a href="../cloud/">
            
                    
                    CLOUD
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../cloud/aws.html">
            
                <a href="../cloud/aws.html">
            
                    
                    AWS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../nginx/">
            
                <a href="../nginx/">
            
                    
                    NGINX
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.2.1" data-path="../nginx/concepts.html">
            
                <a href="../nginx/concepts.html">
            
                    
                    入门到精通
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.2" data-path="../nginx/install.html">
            
                <a href="../nginx/install.html">
            
                    
                    离线安装
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.3" data-path="../nginx/controller.html">
            
                <a href="../nginx/controller.html">
            
                    
                    Nginx Controller
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.2.3.1" data-path="../nginx/apidrive.html">
            
                <a href="../nginx/apidrive.html">
            
                    
                    API
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.2.4" data-path="../nginx/usecase.html">
            
                <a href="../nginx/usecase.html">
            
                    
                    Use Case
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.2.4.1" data-path="../nginx/docker.html">
            
                <a href="../nginx/docker.html">
            
                    
                    Docker
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.2.5" data-path="../nginx/app/">
            
                <a href="../nginx/app/">
            
                    
                    现代应用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.6" data-path="../nginx/programming.html">
            
                <a href="../nginx/programming.html">
            
                    
                    可编程
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../bigip/">
            
                <a href="../bigip/">
            
                    
                    BIG-IP
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../bigip/vs.html">
            
                <a href="../bigip/vs.html">
            
                    
                    Virtual Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../bigip/lb.html">
            
                <a href="../bigip/lb.html">
            
                    
                    Load Balancing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../bigip/monitor.html">
            
                <a href="../bigip/monitor.html">
            
                    
                    Monitor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../bigip/profiles.html">
            
                <a href="../bigip/profiles.html">
            
                    
                    Profiles
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../bigip/dns.html">
            
                <a href="../bigip/dns.html">
            
                    
                    DNS
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../dist.html">
            
                <a href="../dist.html">
            
                    
                    DISTRIBUTED
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../zk/">
            
                <a href="../zk/">
            
                    
                    ZooKeeper
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" >
            
                <a target="_blank" href="https://cloudadc.github.io/distribute-dev-framework/content/dubbo">
            
                    
                    DUBBO
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../mongo/">
            
                <a href="../mongo/">
            
                    
                    MongoDB
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.3.1" data-path="../mongo/viewpoint/presentation.html">
            
                <a href="../mongo/viewpoint/presentation.html">
            
                    
                    定位
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.3.1.1" data-path="../mongo/viewpoint/5thingsfornosql.html">
            
                <a href="../mongo/viewpoint/5thingsfornosql.html">
            
                    
                    NOSQL 选择五维度
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.1.2" data-path="../mongo/viewpoint/oversea.html">
            
                <a href="../mongo/viewpoint/oversea.html">
            
                    
                    MongoDB 助力企业出海
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.1.3" data-path="../mongo/viewpoint/td.html">
            
                <a href="../mongo/viewpoint/td.html">
            
                    
                    Teradata 优化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.1.4" data-path="../mongo/viewpoint/cards.html">
            
                <a href="../mongo/viewpoint/cards.html">
            
                    
                    MongoDB 对话卡片
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.3.2" data-path="../mongo/dba/basic.html">
            
                <a href="../mongo/dba/basic.html">
            
                    
                    基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.3" data-path="../mongo/dev/">
            
                <a href="../mongo/dev/">
            
                    
                    开发
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.3.3.1" data-path="../mongo/dev/aggregation.html">
            
                <a href="../mongo/dev/aggregation.html">
            
                    
                    Aggregation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.3.2" data-path="../mongo/dev/aggregation-sum.html">
            
                <a href="../mongo/dev/aggregation-sum.html">
            
                    
                    $sum
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.3.3" data-path="../mongo/dev/transactions.html">
            
                <a href="../mongo/dev/transactions.html">
            
                    
                    分布式事务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.3.4" data-path="../mongo/dev/java.html">
            
                <a href="../mongo/dev/java.html">
            
                    
                    Java
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.3.5" data-path="../mongo/dev/geo.html">
            
                <a href="../mongo/dev/geo.html">
            
                    
                    地理信息
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.3.4" data-path="../mongo/dba/cluster-admin.html">
            
                <a href="../mongo/dba/cluster-admin.html">
            
                    
                    运维
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.3.4.1" data-path="../mongo/dba/replication.html">
            
                <a href="../mongo/dba/replication.html">
            
                    
                    高可用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.4.2" data-path="../mongo/dba/rs-deployments.html">
            
                <a href="../mongo/dba/rs-deployments.html">
            
                    
                    部署
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.4.3" data-path="../mongo/dba/rs-maintenance.html">
            
                <a href="../mongo/dba/rs-maintenance.html">
            
                    
                    维护
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.4.4" data-path="../mongo/dba/sharding.html">
            
                <a href="../mongo/dba/sharding.html">
            
                    
                    分片
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.4.5" data-path="../mongo/dba/dba.html">
            
                <a href="../mongo/dba/dba.html">
            
                    
                    DBA
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.4.6" data-path="../mongo/dba/sh-restore.html">
            
                <a href="../mongo/dba/sh-restore.html">
            
                    
                    基于 Delayed Secondary 时间点恢复
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.4.7" data-path="../mongo/dba/opsmanager.html">
            
                <a href="../mongo/dba/opsmanager.html">
            
                    
                    Ops Manager
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.4.8" data-path="../mongo/dba/perf.html">
            
                <a href="../mongo/dba/perf.html">
            
                    
                    性能调优
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.4.9" data-path="../mongo/dba/troubleshooting.html">
            
                <a href="../mongo/dba/troubleshooting.html">
            
                    
                    监控
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.3.5" data-path="../mongo/dba/security.html">
            
                <a href="../mongo/dba/security.html">
            
                    
                    安全
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../kafka/">
            
                <a href="../kafka/">
            
                    
                    Kafka
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.4.1" data-path="../kafka/installing/">
            
                <a href="../kafka/installing/">
            
                    
                    安装
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="../elastic/">
            
                <a href="../elastic/">
            
                    
                    ElasticSearch
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="../spark/">
            
                <a href="../spark/">
            
                    
                    Spark
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" >
            
                <a target="_blank" href="https://cloudadc.github.io/nodejs-honeypot/">
            
                    
                    NODE.JS HONEYPOT
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >SWITCHING</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="switch">Switch</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_1_switch_1_vlan">1 Switch 1 VLAN</a>
<ul class="sectlevel2">
<li><a href="#__">&#x63A7;&#x5236;&#x5E73;&#x9762;&#x914D;&#x7F6E;</a></li>
<li><a href="#___2">&#x6570;&#x636E;&#x5E73;&#x9762;&#x914D;&#x7F6E;</a></li>
<li><a href="#___3">&#x7F51;&#x7EDC;&#x8FDE;&#x901A;&#x6D4B;&#x8BD5;</a></li>
<li><a href="#___4">&#x65E5;&#x5FD7;&#x6D41;&#x8868;&#x5206;&#x6790;</a></li>
</ul>
</li>
<li><a href="#_1_switch_3_vlan">1 Switch 3 VLAN</a>
<ul class="sectlevel2">
<li><a href="#___5">&#x63A7;&#x5236;&#x5E73;&#x9762;&#x914D;&#x7F6E;</a></li>
<li><a href="#___6">&#x6570;&#x636E;&#x5E73;&#x9762;&#x914D;&#x7F6E;</a></li>
<li><a href="#___7">&#x7F51;&#x7EDC;&#x8FDE;&#x901A;&#x6D4B;&#x8BD5;</a></li>
</ul>
</li>
<li><a href="#_1_switch_2_vlan_1_router">1 Switch 2 VLAN 1 Router</a>
<ul class="sectlevel2">
<li><a href="#___8">&#x63A7;&#x5236;&#x5E73;&#x9762;&#x914D;&#x7F6E;</a></li>
<li><a href="#___9">&#x6570;&#x636E;&#x5E73;&#x9762;&#x914D;&#x7F6E;</a></li>
<li><a href="#___10">&#x7F51;&#x7EDC;&#x8FDE;&#x901A;&#x6D4B;&#x8BD5;</a></li>
</ul>
</li>
<li><a href="#_2_switch_1_vlan">2 Switch 1 VLAN</a>
<ul class="sectlevel2">
<li><a href="#___11">&#x63A7;&#x5236;&#x5E73;&#x9762;&#x914D;&#x7F6E;</a></li>
<li><a href="#___12">&#x6570;&#x636E;&#x5E73;&#x9762;&#x914D;&#x7F6E;</a></li>
<li><a href="#___13">&#x7F51;&#x7EDC;&#x8FDE;&#x901A;&#x6D4B;&#x8BD5;</a></li>
</ul>
</li>
<li><a href="#_2_switch_2_vlan_1_router">2 Switch 2 VLAN 1 Router</a>
<ul class="sectlevel2">
<li><a href="#___14">&#x63A7;&#x5236;&#x5E73;&#x9762;&#x914D;&#x7F6E;</a></li>
<li><a href="#___15">&#x6570;&#x636E;&#x5E73;&#x9762;&#x914D;&#x7F6E;</a></li>
<li><a href="#___16">&#x7F51;&#x7EDC;&#x8FDE;&#x901A;&#x6D4B;&#x8BD5;</a></li>
</ul>
</li>
<li><a href="#_3_switch_2_vlan_1_tunnel">3 Switch 2 VLAN 1 Tunnel</a>
<ul class="sectlevel2">
<li><a href="#___17">&#x63A7;&#x5236;&#x5E73;&#x9762;&#x914D;&#x7F6E;</a></li>
<li><a href="#___18">&#x6570;&#x636E;&#x5E73;&#x9762;&#x914D;&#x7F6E;</a></li>
<li><a href="#___19">&#x7F51;&#x7EDC;&#x8FDE;&#x901A;&#x6D4B;&#x8BD5;</a></li>
</ul>
</li>
<li><a href="#_3_switch_1_vlan_loop">3 Switch 1 VLAN(Loop)</a>
<ul class="sectlevel2">
<li><a href="#___20">&#x7BA1;&#x7406;&#x5E73;&#x9762;&#x914D;&#x7F6E;</a></li>
<li><a href="#___21">&#x6570;&#x636E;&#x5E73;&#x9762;&#x914D;&#x7F6E;</a></li>
<li><a href="#___22">&#x7F51;&#x7EDC;&#x8FDE;&#x901A;&#x6D4B;&#x8BD5;</a></li>
</ul>
</li>
<li><a href="#_4_switch_1_vlan_multi_root">4 Switch 1 VLAN(Multi-root)</a>
<ul class="sectlevel2">
<li><a href="#___23">&#x7BA1;&#x7406;&#x5E73;&#x9762;&#x914D;&#x7F6E;</a></li>
<li><a href="#___24">&#x6570;&#x636E;&#x5E73;&#x9762;&#x914D;&#x7F6E;</a></li>
<li><a href="#___25">&#x7F51;&#x7EDC;&#x8FDE;&#x901A;&#x6D4B;&#x8BD5;</a></li>
</ul>
</li>
</ul>
</div>
<div class="sect1">
<h2 id="_1_switch_1_vlan">1 Switch 1 VLAN</h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="image"><img src="img/ovs-1switch-1vlan.png" alt="ovs 1switch 1vlan.png"></span></p>
</div>
<div class="sect2">
<h3 id="__">&#x63A7;&#x5236;&#x5E73;&#x9762;&#x914D;&#x7F6E;</h3>
<div class="listingblock">
<div class="title"><strong>1. &#x7F16;&#x8F91; faucet &#x914D;&#x7F6E;&#x6587;&#x4EF6;/etc/faucet/faucet.yaml&#xFF0C;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x5185;&#x5BB9;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">vlans:
  office:
    vid: 100
    description: <span class="hljs-string">&quot;office network&quot;</span>
dps:
  switch-1:
    dp_id: 0x1
    hardware: <span class="hljs-string">&quot;Open vSwitch&quot;</span>
    interfaces:
      1:
        name: <span class="hljs-string">&quot;host1&quot;</span>
        description: <span class="hljs-string">&quot;host1 network namespace&quot;</span>
        native_vlan: office
      2:
        name: <span class="hljs-string">&quot;host2&quot;</span>
        description: <span class="hljs-string">&quot;host2 network namespace&quot;</span>
        native_vlan: office
      3:
        name: <span class="hljs-string">&quot;host3&quot;</span>
        description: <span class="hljs-string">&quot;host3 network namespace&quot;</span>
        native_vlan: office
      4:
        name: <span class="hljs-string">&quot;host4&quot;</span>
        description: <span class="hljs-string">&quot;host4 network namespace&quot;</span>
        native_vlan: office</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>2. &#x91CD;&#x65B0;&#x52A0;&#x8F7D;&#x670D;&#x52A1;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo systemctl reload faucet</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="___2">&#x6570;&#x636E;&#x5E73;&#x9762;&#x914D;&#x7F6E;</h3>
<div class="listingblock">
<div class="title"><strong>1. &#x6DFB;&#x52A0; 4 &#x4E2A; Host</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> 1 2 3 4 ; <span class="hljs-keyword">do</span> create_ns host<span class="hljs-variable">$i</span> 192.168.0.<span class="hljs-variable">$i</span>/24 ; <span class="hljs-keyword">done</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>2. &#x6DFB;&#x52A0; Switch &#x914D;&#x7F6E;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo ovs-vsctl add-br br0 \
-- <span class="hljs-built_in">set</span> bridge br0 other-config:datapath-id=0000000000000001 \
-- <span class="hljs-built_in">set</span> bridge br0 other-config:<span class="hljs-built_in">disable</span>-in-band=<span class="hljs-literal">true</span> \
-- <span class="hljs-built_in">set</span> bridge br0 fail_mode=secure \
-- add-port br0 veth-host1 -- <span class="hljs-built_in">set</span> interface veth-host1 ofport_request=1 \
-- add-port br0 veth-host2 -- <span class="hljs-built_in">set</span> interface veth-host2 ofport_request=2 \
-- add-port br0 veth-host3 -- <span class="hljs-built_in">set</span> interface veth-host3 ofport_request=3 \
-- add-port br0 veth-host4 -- <span class="hljs-built_in">set</span> interface veth-host4 ofport_request=4 \
-- <span class="hljs-built_in">set</span>-controller br0 tcp:127.0.0.1:6653 tcp:127.0.0.1:6654</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="___3">&#x7F51;&#x7EDC;&#x8FDE;&#x901A;&#x6D4B;&#x8BD5;</h3>
<div class="listingblock">
<div class="title"><strong>host &#x4E92; ping &#x6D4B;&#x8BD5;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> 1 2 3 4 ; <span class="hljs-keyword">do</span> <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> 1 2 3 4 ; <span class="hljs-keyword">do</span> as_ns host<span class="hljs-variable">$i</span> ping 192.168.0.<span class="hljs-variable">$j</span> -c3 ; <span class="hljs-keyword">done</span> ; <span class="hljs-keyword">done</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="___4">&#x65E5;&#x5FD7;&#x6D41;&#x8868;&#x5206;&#x6790;</h3>
<div class="listingblock">
<div class="title"><strong>1. &#x63A7;&#x5236;&#x5668; faucet.log</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">Dec 29 11:10:25 faucet.valve INFO     DPID 1 (0x1) switch-1 Cold start configuring DP
Dec 29 11:10:25 faucet.valve INFO     DPID 1 (0x1) switch-1 Port 1 (host1 network namespace) configured
Dec 29 11:10:25 faucet.valve INFO     DPID 1 (0x1) switch-1 Port 2 (host2 network namespace) configured
Dec 29 11:10:25 faucet.valve INFO     DPID 1 (0x1) switch-1 Port 3 (host3 network namespace) configured
Dec 29 11:10:25 faucet.valve INFO     DPID 1 (0x1) switch-1 Port 4 (host4 network namespace) configured
Dec 29 11:10:25 faucet.valve INFO     DPID 1 (0x1) switch-1 Configuring VLAN office vid:100 untagged: Port 1,Port 2,Port 3,Port 4</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>2. &#x67E5;&#x770B; OVS ovs-vswitchd.log</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">2021-12-29T03:10:25.003Z|00262|vconn|DBG|tcp:127.0.0.1:6653: sent (Success): OFPT_HELLO (OF1.5) (xid=0x3):
 version bitmap: 0x01, 0x02, 0x03, 0x04, 0x05, 0x06
2021-12-29T03:10:25.004Z|00263|vconn|DBG|tcp:127.0.0.1:6654: sent (Success): OFPT_HELLO (OF1.5) (xid=0x4):
 version bitmap: 0x01, 0x02, 0x03, 0x04, 0x05, 0x06
2021-12-29T03:10:25.007Z|00264|vconn|DBG|tcp:127.0.0.1:6653: received: OFPT_HELLO (OF1.3) (xid=0x39ec13fe):
 version bitmap: 0x01, 0x02, 0x03, 0x04
2021-12-29T03:10:25.007Z|00265|vconn|DBG|tcp:127.0.0.1:6653: negotiated OpenFlow version 0x04 (we support version 0x06 and earlier, peer supports version 0x04 and earlier)
2021-12-29T03:10:25.007Z|00266|rconn|INFO|br0&lt;-&gt;tcp:127.0.0.1:6653: connected
2021-12-29T03:10:25.008Z|00267|vconn|DBG|tcp:127.0.0.1:6653: received: OFPT_FEATURES_REQUEST (OF1.3) (xid=0x39ec13ff):
2021-12-29T03:10:25.008Z|00268|vconn|DBG|tcp:127.0.0.1:6653: sent (Success): OFPT_FEATURES_REPLY (OF1.3) (xid=0x39ec13ff): dpid:0000000000000001
n_tables:254, n_buffers:0
capabilities: FLOW_STATS TABLE_STATS PORT_STATS GROUP_STATS QUEUE_STATS
2021-12-29T03:10:25.008Z|00269|vconn|DBG|tcp:127.0.0.1:6653: received: OFPT_ECHO_REQUEST (OF1.3) (xid=0x39ec1400): 0 bytes of payload
2021-12-29T03:10:25.008Z|00270|vconn|DBG|tcp:127.0.0.1:6653: sent (Success): OFPT_ECHO_REPLY (OF1.3) (xid=0x39ec1400): 0 bytes of payload
2021-12-29T03:10:25.017Z|00271|vconn|DBG|tcp:127.0.0.1:6653: received: OFPST_PORT_DESC request (OF1.3) (xid=0x39ec1401): port=ANY
2021-12-29T03:10:25.019Z|00272|vconn|DBG|tcp:127.0.0.1:6653: sent (Success): OFPST_PORT_DESC reply (OF1.3) (xid=0x39ec1401):
 1(veth-host1): addr:9a:72:bd:be:ec:b2
     config:     0
     state:      LIVE
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 2(veth-host2): addr:da:23:2a:ab:df:42
     config:     0
     state:      LIVE
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 3(veth-host3): addr:6e:9b:17:61:46:32
     config:     0
     state:      LIVE
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 4(veth-host4): addr:ae:8e:bf:2c:93:24
     config:     0
     state:      LIVE
     current:    10GB-FD COPPER
     speed: 10000 Mbps now, 0 Mbps max
 LOCAL(br0): addr:fe:5b:f3:3b:dd:47
     config:     PORT_DOWN
     state:      LINK_DOWN
     speed: 0 Mbps now, 0 Mbps max</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">**</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_1_switch_3_vlan">1 Switch 3 VLAN</h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="image"><img src="img/ovs-vlan-topology.png" alt="ovs vlan topology.png"></span></p>
</div>
<div class="paragraph">
<p>&#x5982;&#x4E0A;&#x56FE;&#x6240;&#x793A;&#xFF0C;&#x5171;&#x4E09;&#x4E2A;VLAN&#xFF1A;</p>
</div>
<div class="ulist">
<ul>
<li>
<p>host1, host2, host3, host4 &#x4F4D;&#x4E8E; VLAN 100</p>
</li>
<li>
<p>host5, host6 &#x4F4D;&#x4E8E; VLAN 200</p>
</li>
<li>
<p>host7, host8 &#x4F4D;&#x4E8E; VLAN 300</p>
</li>
<li>
<p>host9 &#x6A2A;&#x8DE8;&#x4E09;&#x4E2A; VLAN</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>&#x4ECE;&#x662F;&#x5426;&#x6253; tag &#x533A;&#x5206;&#xFF1A;</p>
</div>
<div class="ulist">
<ul>
<li>
<p>untagged ports: 1, 2, 5, 6</p>
</li>
<li>
<p>tagged ports: 3, 4, 7, 8, 9</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="___5">&#x63A7;&#x5236;&#x5E73;&#x9762;&#x914D;&#x7F6E;</h3>
<div class="listingblock">
<div class="title"><strong>1. &#x7F16;&#x8F91; /etc/faucet/faucet.yaml&#xFF0C;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x5185;&#x5BB9;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">vlans:
  vlan100:
    vid: 100
  vlan200:
    vid: 200
  vlan300:
    vid: 300
dps:
  switch-1:
    dp_id: 0x1
    hardware: <span class="hljs-string">&quot;Open vSwitch&quot;</span>
    interfaces:
      1:
        name: <span class="hljs-string">&quot;host1&quot;</span>
        description: <span class="hljs-string">&quot;host2 network namespace&quot;</span>
        native_vlan: vlan100
      2:
        name: <span class="hljs-string">&quot;host2&quot;</span>
        description: <span class="hljs-string">&quot;host2 network namespace&quot;</span>
        native_vlan: vlan100
      3:
        name: <span class="hljs-string">&quot;host3&quot;</span>
        tagged_vlans: [vlan100]
      4:
        name: <span class="hljs-string">&quot;host4&quot;</span>
        tagged_vlans: [vlan100]
      5:
        name: <span class="hljs-string">&quot;host5&quot;</span>
        native_vlan: vlan200
      6:
        name: <span class="hljs-string">&quot;host6&quot;</span>
        native_vlan: vlan200
      7:
        name: <span class="hljs-string">&quot;host7&quot;</span>
        tagged_vlans: [vlan300]
      8:
        name: <span class="hljs-string">&quot;host8&quot;</span>
        tagged_vlans: [vlan300]
      9:
        name: <span class="hljs-string">&quot;host9&quot;</span>
        tagged_vlans: [vlan100,vlan200,vlan300]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>2. faucet &#x63A7;&#x5236;&#x5668;&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo systemctl reload faucet</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="___6">&#x6570;&#x636E;&#x5E73;&#x9762;&#x914D;&#x7F6E;</h3>
<div class="listingblock">
<div class="title"><strong>1. VLAN 100 &#x4E2D;&#x521B;&#x5EFA; untagged host1 &#x548C; host2</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">create_ns host1 192.168.0.1/24
create_ns host2 192.168.0.2/24
sudo ovs-vsctl add-br br0 \
-- <span class="hljs-built_in">set</span> bridge br0 other-config:datapath-id=0000000000000001 \
-- <span class="hljs-built_in">set</span> bridge br0 other-config:<span class="hljs-built_in">disable</span>-in-band=<span class="hljs-literal">true</span> \
-- <span class="hljs-built_in">set</span> bridge br0 fail_mode=secure \
-- add-port br0 veth-host1 -- <span class="hljs-built_in">set</span> interface veth-host1 ofport_request=1 \
-- add-port br0 veth-host2 -- <span class="hljs-built_in">set</span> interface veth-host2 ofport_request=2 \
-- <span class="hljs-built_in">set</span>-controller br0 tcp:127.0.0.1:6653 tcp:127.0.0.1:6654</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>2. VLAN 100 &#x4E2D;&#x521B;&#x5EFA; tagged host3 &#x548C; host4</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">create_ns host3 0.0.0.0
create_ns host4 0.0.0.0
create_ns host3 0.0.0.0
create_ns host4 0.0.0.0
add_tagged_interface host3 100 192.168.0.3/24
add_tagged_interface host4 100 192.168.0.4/24</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>3. VLAN 200 &#x4E2D;&#x521B;&#x5EFA; untagged host5 &#x548C; host6</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">create_ns host5 192.168.2.5/24
create_ns host6 192.168.2.6/24</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>4. VLAN 300 &#x4E2D;&#x521B;&#x5EFA; tagged host7 &#x548C; host8</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">create_ns host7 0.0.0.0
create_ns host8 0.0.0.0
add_tagged_interface host7 300 192.168.3.7/24
add_tagged_interface host8 300 192.168.3.8/24</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>5. &#x6DFB;&#x52A0; tagged host9</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">create_ns host9 0.0.0.0
add_tagged_interface host9 100 192.168.0.9/24
add_tagged_interface host9 200 192.168.2.9/24
add_tagged_interface host9 300 192.168.3.9/24</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>6. host3 - host9 &#x8FDE;&#x63A5;&#x5230;&#x4EA4;&#x6362;&#x673A;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo ovs-vsctl add-port br0 veth-host3 -- <span class="hljs-built_in">set</span> interface veth-host3 ofport_request=3 \
-- add-port br0 veth-host4 -- <span class="hljs-built_in">set</span> interface veth-host4 ofport_request=4 \
-- add-port br0 veth-host5 -- <span class="hljs-built_in">set</span> interface veth-host5 ofport_request=5 \
-- add-port br0 veth-host6 -- <span class="hljs-built_in">set</span> interface veth-host6 ofport_request=6 \
-- add-port br0 veth-host7 -- <span class="hljs-built_in">set</span> interface veth-host7 ofport_request=7 \
-- add-port br0 veth-host8 -- <span class="hljs-built_in">set</span> interface veth-host8 ofport_request=8 \
-- add-port br0 veth-host9 -- <span class="hljs-built_in">set</span> interface veth-host9 ofport_request=9</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="___7">&#x7F51;&#x7EDC;&#x8FDE;&#x901A;&#x6D4B;&#x8BD5;</h3>
<div class="listingblock">
<div class="title"><strong>1. &#x540C; VLAN &#x4E2D; host &#x4E92; ping(&#x6210;&#x529F;)</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> 1 2 3 4 9 ; <span class="hljs-keyword">do</span> <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> 1 2 3 4 9 ; <span class="hljs-keyword">do</span> as_ns host<span class="hljs-variable">$i</span> ping 192.168.0.<span class="hljs-variable">$j</span> -c3 ; <span class="hljs-keyword">done</span> ; <span class="hljs-keyword">done</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> 5 6 9 ; <span class="hljs-keyword">do</span> <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> 5 6 9 ; <span class="hljs-keyword">do</span> as_ns host<span class="hljs-variable">$i</span> ping 192.168.2.<span class="hljs-variable">$j</span> -c3 ; <span class="hljs-keyword">done</span> ; <span class="hljs-keyword">done</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> 7 8 9 ; <span class="hljs-keyword">do</span> <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> 7 8 9 ; <span class="hljs-keyword">do</span> as_ns host<span class="hljs-variable">$i</span> ping 192.168.3.<span class="hljs-variable">$j</span> -c3 ; <span class="hljs-keyword">done</span> ; <span class="hljs-keyword">done</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>2. &#x4E0D;&#x540C; VLAN host ping(&#x5931;&#x8D25;)</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> 1 2 3 4  ; <span class="hljs-keyword">do</span> <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> 5 6 ; <span class="hljs-keyword">do</span> as_ns host<span class="hljs-variable">$i</span> ping 192.168.2.<span class="hljs-variable">$j</span> -c3 ; <span class="hljs-keyword">done</span> ; <span class="hljs-keyword">done</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> 1 2 3 4  ; <span class="hljs-keyword">do</span> <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> 7 8 ; <span class="hljs-keyword">do</span> as_ns host<span class="hljs-variable">$i</span> ping 192.168.3.<span class="hljs-variable">$j</span> -c3 ; <span class="hljs-keyword">done</span> ; <span class="hljs-keyword">done</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>3. &#x5206;&#x522B;&#x5728; host1 &#x548C; host3 ping host9(Native VLAN Vs Tagged VLAN)</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ as_ns host1 ping 192.168.0.9 -c2
PING 192.168.0.9 (192.168.0.9) 56(84) bytes of data.
64 bytes from 192.168.0.9: icmp_seq=1 ttl=64 time=0.720 ms
64 bytes from 192.168.0.9: icmp_seq=2 ttl=64 time=0.096 ms

$ as_ns host3 ping 192.168.0.9 -c2
PING 192.168.0.9 (192.168.0.9) 56(84) bytes of data.
64 bytes from 192.168.0.9: icmp_seq=1 ttl=64 time=0.467 ms
64 bytes from 192.168.0.9: icmp_seq=2 ttl=64 time=0.061 ms</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>4. &#x5BF9;&#x5E94;&#x4EA4;&#x6362;&#x673A;&#x53E3;&#x4E0A;&#x6293;&#x5305;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ sudo tcpdump <span class="hljs-_">-l</span> <span class="hljs-_">-e</span> -n -i veth-host1 icmp
08:27:10.387834 92:20:d0:47:15:55 &gt; de:02:53:53:8e:48, ethertype IPv4 (0x0800), length 98: 192.168.0.1 &gt; 192.168.0.9: ICMP <span class="hljs-built_in">echo</span> request, id 6309, seq 1, length 64
08:27:10.388518 de:02:53:53:8e:48 &gt; 92:20:d0:47:15:55, ethertype IPv4 (0x0800), length 98: 192.168.0.9 &gt; 192.168.0.1: ICMP <span class="hljs-built_in">echo</span> reply, id 6309, seq 1, length 64
08:27:11.389582 92:20:d0:47:15:55 &gt; de:02:53:53:8e:48, ethertype IPv4 (0x0800), length 98: 192.168.0.1 &gt; 192.168.0.9: ICMP <span class="hljs-built_in">echo</span> request, id 6309, seq 2, length 64
08:27:11.389636 de:02:53:53:8e:48 &gt; 92:20:d0:47:15:55, ethertype IPv4 (0x0800), length 98: 192.168.0.9 &gt; 192.168.0.1: ICMP <span class="hljs-built_in">echo</span> reply, id 6309, seq 2, length 64

$ sudo tcpdump <span class="hljs-_">-l</span> <span class="hljs-_">-e</span> -n -i veth-host3 icmp
08:27:45.714075 16:d8:4e:a6:35:9f &gt; de:02:53:53:8e:48, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 192.168.0.3 &gt; 192.168.0.9: ICMP <span class="hljs-built_in">echo</span> request, id 6314, seq 1, length 64
08:27:45.714520 de:02:53:53:8e:48 &gt; 16:d8:4e:a6:35:9f, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 192.168.0.9 &gt; 192.168.0.3: ICMP <span class="hljs-built_in">echo</span> reply, id 6314, seq 1, length 64
08:27:46.717684 16:d8:4e:a6:35:9f &gt; de:02:53:53:8e:48, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 192.168.0.3 &gt; 192.168.0.9: ICMP <span class="hljs-built_in">echo</span> request, id 6314, seq 2, length 64
08:27:46.717718 de:02:53:53:8e:48 &gt; 16:d8:4e:a6:35:9f, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 192.168.0.9 &gt; 192.168.0.3: ICMP <span class="hljs-built_in">echo</span> reply, id 6314, seq 2, length 64</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Tagged VLAN &#x6293;&#x5305;&#x4E2D;&#x6709; 802.1Q &#x6807;&#x8BB0;&#x3002;
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_1_switch_2_vlan_1_router">1 Switch 2 VLAN 1 Router</h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="image"><img src="img/ovs-routing-2vlan-2host.png" alt="ovs routing 2vlan 2host.png"></span></p>
</div>
<div class="paragraph">
<p>&#x5982;&#x56FE;&#x6240;&#x793A;&#x6240;&#x793A;&#xFF0C;&#x6709;&#x4E00;&#x4E2A;&#x4EA4;&#x6362;&#x673A;&#xFF0C;2 &#x4E2A;VLAN&#xFF0C;&#x6BCF;&#x4E2A; VLAN &#x4E2D;&#x6709; 1 &#x4E2A;Host&#xFF0C;&#x8DE8;VLAN&#x6D41;&#x91CF;&#x901A;&#x8FC7;&#x8DEF;&#x7531;&#x5668;&#x8F6C;&#x53D1;&#x3002;</p>
</div>
<div class="sect2">
<h3 id="___8">&#x63A7;&#x5236;&#x5E73;&#x9762;&#x914D;&#x7F6E;</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">vlans:
  vlan100:
    vid: 100
    faucet_vips: [<span class="hljs-string">&quot;10.0.0.254/24&quot;</span>]  <span class="hljs-comment"># Faucet&apos;s virtual IP address for vlan100</span>
    faucet_mac: <span class="hljs-string">&quot;00:00:00:00:00:11&quot;</span>
  vlan200:
    vid: 200
    faucet_vips: [<span class="hljs-string">&quot;10.0.1.254/24&quot;</span>]  <span class="hljs-comment"># Faucet&apos;s virtual IP address for vlan200</span>
    faucet_mac: <span class="hljs-string">&quot;00:00:00:00:00:22&quot;</span>
routers:
  router-1:                           <span class="hljs-comment"># Router name</span>
    vlans: [vlan100, vlan200]       <span class="hljs-comment"># Names of vlans to allow routing between</span>
dps:
  switch-1:
    dp_id: 0x1
    hardware: <span class="hljs-string">&quot;Open vSwitch&quot;</span>
    interfaces:
      1:
        name: <span class="hljs-string">&quot;host1&quot;</span>
        description: <span class="hljs-string">&quot;host1 network namespace&quot;</span>
        native_vlan: vlan100
      2:
        name: <span class="hljs-string">&quot;host2&quot;</span>
        description: <span class="hljs-string">&quot;host2 network namespace&quot;</span>
        native_vlan: vlan200</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>2. &#x91CD;&#x65B0;&#x52A0;&#x8F7D;&#x670D;&#x52A1;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo systemctl reload faucet</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="___9">&#x6570;&#x636E;&#x5E73;&#x9762;&#x914D;&#x7F6E;</h3>
<div class="listingblock">
<div class="title"><strong>1. Host &#x914D;&#x7F6E;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">create_ns host1 10.0.1.1/24
create_ns host2 10.0.2.2/24
as_ns host1 ip route add default via 10.0.1.254 dev veth0
as_ns host2 ip route add default via 10.0.2.254 dev veth0</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>2. OVS &#x914D;&#x7F6E;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo ovs-vsctl add-br br0 \
-- <span class="hljs-built_in">set</span> bridge br0 other-config:datapath-id=0000000000000001 \
-- <span class="hljs-built_in">set</span> bridge br0 other-config:<span class="hljs-built_in">disable</span>-in-band=<span class="hljs-literal">true</span> \
-- <span class="hljs-built_in">set</span> bridge br0 fail_mode=secure \
-- add-port br0 veth-host1 -- <span class="hljs-built_in">set</span> interface veth-host1 ofport_request=1 \
-- add-port br0 veth-host2 -- <span class="hljs-built_in">set</span> interface veth-host2 ofport_request=2 \
-- <span class="hljs-built_in">set</span>-controller br0 tcp:127.0.0.1:6653 tcp:127.0.0.1:6654</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="___10">&#x7F51;&#x7EDC;&#x8FDE;&#x901A;&#x6D4B;&#x8BD5;</h3>
<div class="listingblock">
<div class="title"><strong>1. host1 ping host2</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">as_ns host1 ping 10.0.2.2 -c3</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>2. host2 &#x6293;&#x5305;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ as_ns host2 tcpdump <span class="hljs-_">-l</span> <span class="hljs-_">-e</span> -n -i veth0
10:10:40.151867 00:00:00:00:00:22 &gt; c6:30:a7:0b:c6:80, ethertype IPv4 (0x0800), length 98: 10.0.1.1 &gt; 10.0.2.2: ICMP <span class="hljs-built_in">echo</span> request, id 2823, seq 213, length 64
10:10:40.151900 c6:30:a7:0b:c6:80 &gt; 00:00:00:00:00:22, ethertype IPv4 (0x0800), length 98: 10.0.2.2 &gt; 10.0.1.1: ICMP <span class="hljs-built_in">echo</span> reply, id 2823, seq 213, length 64
10:10:41.176232 00:00:00:00:00:22 &gt; c6:30:a7:0b:c6:80, ethertype IPv4 (0x0800), length 98: 10.0.1.1 &gt; 10.0.2.2: ICMP <span class="hljs-built_in">echo</span> request, id 2823, seq 214, length 64
10:10:41.176297 c6:30:a7:0b:c6:80 &gt; 00:00:00:00:00:22, ethertype IPv4 (0x0800), length 98: 10.0.2.2 &gt; 10.0.1.1: ICMP <span class="hljs-built_in">echo</span> reply, id 2823, seq 214, length 64
10:10:42.200186 00:00:00:00:00:22 &gt; c6:30:a7:0b:c6:80, ethertype IPv4 (0x0800), length 98: 10.0.1.1 &gt; 10.0.2.2: ICMP <span class="hljs-built_in">echo</span> request, id 2823, seq 215, length 64
10:10:42.200252 c6:30:a7:0b:c6:80 &gt; 00:00:00:00:00:22, ethertype IPv4 (0x0800), length 98: 10.0.2.2 &gt; 10.0.1.1: ICMP <span class="hljs-built_in">echo</span> reply, id 2823, seq 215, length 64</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_2_switch_1_vlan">2 Switch 1 VLAN</h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="image"><img src="img/ovs-switch-2switch-1vlan.png" alt="ovs switch 2switch 1vlan.png"></span></p>
</div>
<div class="sect2">
<h3 id="___11">&#x63A7;&#x5236;&#x5E73;&#x9762;&#x914D;&#x7F6E;</h3>
<div class="listingblock">
<div class="title"><strong>1. &#x66F4;&#x65B0;/etc/faucet/faucet.yaml</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">vlans:
  hosts:
    vid: 100
dps:
  br0:
    dp_id: 0x1
    hardware: <span class="hljs-string">&quot;Open vSwitch&quot;</span>
    stack:
      priority: 1
    interfaces:
      1:
        description: <span class="hljs-string">&quot;host1 network namespace&quot;</span>
        native_vlan: hosts
      2:
        description: <span class="hljs-string">&quot;br0 stack link to br1&quot;</span>
        stack:
          dp: br1
          port: 2
  br1:
    dp_id: 0x2
    hardware: <span class="hljs-string">&quot;Open vSwitch&quot;</span>
    interfaces:
      1:
        description: <span class="hljs-string">&quot;host2 network namespace&quot;</span>
        native_vlan: hosts
      2:
        description: <span class="hljs-string">&quot;br1 stack link to br0&quot;</span>
        stack:
          dp: br0
          port: 2</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>2. &#x91CD;&#x65B0;&#x52A0;&#x8F7D;&#x670D;&#x52A1;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo systemctl reload faucet</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="___12">&#x6570;&#x636E;&#x5E73;&#x9762;&#x914D;&#x7F6E;</h3>
<div class="listingblock">
<div class="title"><strong>1. &#x6DFB;&#x52A0; 2 &#x4E2A; Host</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">create_ns host1 10.0.1.1/24
create_ns host2 10.0.1.2/24</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>2. &#x589E;&#x52A0; OVS &#x914D;&#x7F6E;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo ovs-vsctl add-br br0 \
-- <span class="hljs-built_in">set</span> bridge br0 other-config:datapath-id=0000000000000001 \
-- <span class="hljs-built_in">set</span> bridge br0 other-config:<span class="hljs-built_in">disable</span>-in-band=<span class="hljs-literal">true</span> \
-- <span class="hljs-built_in">set</span> bridge br0 fail_mode=secure \
-- add-port br0 veth-host1 -- <span class="hljs-built_in">set</span> interface veth-host1 ofport_request=1 \
-- <span class="hljs-built_in">set</span>-controller br0 tcp:127.0.0.1:6653 tcp:127.0.0.1:6654

sudo ovs-vsctl add-br br1 \
-- <span class="hljs-built_in">set</span> bridge br1 other-config:datapath-id=0000000000000002 \
-- <span class="hljs-built_in">set</span> bridge br1 other-config:<span class="hljs-built_in">disable</span>-in-band=<span class="hljs-literal">true</span> \
-- <span class="hljs-built_in">set</span> bridge br1 fail_mode=secure \
-- add-port br1 veth-host2 -- <span class="hljs-built_in">set</span> interface veth-host2 ofport_request=1 \
-- <span class="hljs-built_in">set</span>-controller br1 tcp:127.0.0.1:6653 tcp:127.0.0.1:6654</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>3. &#x5C06; br0 port 2 &#x548C; br1 port 2 &#x8FDE;&#x63A5;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">inter_switch_link br0:2 br1:2</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="___13">&#x7F51;&#x7EDC;&#x8FDE;&#x901A;&#x6D4B;&#x8BD5;</h3>
<div class="listingblock">
<div class="title"><strong>1. &#x67E5;&#x770B; /var/log/faucet/faucet.log &#x65E5;&#x5FD7;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">Dec 28 15:46:55 faucet.valve INFO     DPID 2 (0x2) br1 LLDP on 0e:00:00:00:00:01, Port 2 from 0e:00:00:00:00:01 (remote DPID 1 (0x1), port 2) state UP
Dec 28 15:46:55 faucet.valve INFO     DPID 1 (0x1) br0 LLDP on 0e:00:00:00:00:01, Port 2 from 0e:00:00:00:00:01 (remote DPID 2 (0x2), port 2) state UP
Dec 28 15:47:17 faucet.valve INFO     DPID 2 (0x2) br1 L2 learned on Port 2 06:a3:79:5a:b7:31 (L2 <span class="hljs-built_in">type</span> 0x0806, L2 dst ff:ff:ff:ff:ff:ff, L3 src 10.0.1.1, L3 dst 10.0.1.2) Port 2 VLAN 100 (1 hosts total) from remote DP br0 Port 2
Dec 28 15:47:17 faucet.valve INFO     DPID 2 (0x2) br1 L2 learned on Port 1 3a:a7:d5:62:08:91 (L2 <span class="hljs-built_in">type</span> 0x0806, L2 dst 06:a3:79:5a:b7:31, L3 src 10.0.1.2, L3 dst 10.0.1.1) Port 1 VLAN 100 (2 hosts total)
Dec 28 15:47:17 faucet.valve INFO     DPID 1 (0x1) br0 L2 learned on Port 2 3a:a7:d5:62:08:91 (L2 <span class="hljs-built_in">type</span> 0x0806, L2 dst 06:a3:79:5a:b7:31, L3 src 10.0.1.2, L3 dst 10.0.1.1) Port 2 VLAN 100 (2 hosts total) from remote DP br1 Port 2
Dec 28 15:50:25 faucet.valve INFO     DPID 1 (0x1) br0 L2 learned on Port 1 06:a3:79:5a:b7:31 (L2 <span class="hljs-built_in">type</span> 0x0800, L2 dst 3a:a7:d5:62:08:91, L3 src 10.0.1.1, L3 dst 10.0.1.2) Port 1 VLAN 100 (2 hosts total)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>2. Ping &#x6D4B;&#x8BD5;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">as_ns host1 ping 10.0.1.2 -c3
as_ns host2 ping 10.0.1.1 -c3</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_2_switch_2_vlan_1_router">2 Switch 2 VLAN 1 Router</h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="image"><img src="img/ovs-2switch-2vlan-1router.png" alt="ovs 2switch 2vlan 1router.png"></span></p>
</div>
<div class="sect2">
<h3 id="___14">&#x63A7;&#x5236;&#x5E73;&#x9762;&#x914D;&#x7F6E;</h3>
<div class="listingblock">
<div class="title"><strong>1. &#x66F4;&#x65B0;/etc/faucet/faucet.yaml</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">vlans:
  hosts:
    vid: 100
    faucet_vips: [<span class="hljs-string">&quot;10.0.1.254/24&quot;</span>]
    faucet_mac: <span class="hljs-string">&quot;00:00:00:00:00:11&quot;</span>
  servers:
    vid: 200
    faucet_vips: [<span class="hljs-string">&quot;10.0.2.254/24&quot;</span>]
    faucet_mac: <span class="hljs-string">&quot;00:00:00:00:00:22&quot;</span>
routers:
  router-1:
    vlans: [hosts, servers]
dps:
  br0:
    dp_id: 0x1
    hardware: <span class="hljs-string">&quot;Open vSwitch&quot;</span>
    stack:
      priority: 1
    interfaces:
      1:
        description: <span class="hljs-string">&quot;host1 network namespace&quot;</span>
        native_vlan: hosts
      2:
        description: <span class="hljs-string">&quot;server1 network namespace&quot;</span>
        native_vlan: servers
      3:
        description: <span class="hljs-string">&quot;br0 stack link to br1&quot;</span>
        stack:
          dp: br1
          port: 3
  br1:
    dp_id: 0x2
    hardware: <span class="hljs-string">&quot;Open vSwitch&quot;</span>
    interfaces:
      1:
        description: <span class="hljs-string">&quot;host2 network namespace&quot;</span>
        native_vlan: hosts
      2:
        description: <span class="hljs-string">&quot;server2 network namespace&quot;</span>
        native_vlan: servers
      3:
        description: <span class="hljs-string">&quot;br1 stack link to br0&quot;</span>
        stack:
          dp: br0
          port: 3</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>2. &#x91CD;&#x65B0;&#x52A0;&#x8F7D;&#x670D;&#x52A1;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo systemctl reload faucet</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="___15">&#x6570;&#x636E;&#x5E73;&#x9762;&#x914D;&#x7F6E;</h3>
<div class="listingblock">
<div class="title"><strong>1. &#x6DFB;&#x52A0; Host</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">create_ns host1 10.0.1.1/24
create_ns host2 10.0.1.2/24
create_ns server1 10.0.2.1/24
create_ns server2 10.0.2.2/24</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>2. Host &#x6DFB;&#x52A0;&#x9ED8;&#x8BA4;&#x7F51;&#x5173;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">as_ns host1 ip route add default via 10.0.1.254
as_ns host2 ip route add default via 10.0.1.254
as_ns server1 ip route add default via 10.0.2.254
as_ns server2 ip route add default via 10.0.2.254</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>3. OVS &#x914D;&#x7F6E;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo ovs-vsctl add-br br0 \
-- <span class="hljs-built_in">set</span> bridge br0 other-config:datapath-id=0000000000000001 \
-- <span class="hljs-built_in">set</span> bridge br0 other-config:<span class="hljs-built_in">disable</span>-in-band=<span class="hljs-literal">true</span> \
-- <span class="hljs-built_in">set</span> bridge br0 fail_mode=secure \
-- add-port br0 veth-host1 -- <span class="hljs-built_in">set</span> interface veth-host1 ofport_request=1 \
-- add-port br0 veth-server1 -- <span class="hljs-built_in">set</span> interface veth-server1 ofport_request=2 \
-- <span class="hljs-built_in">set</span>-controller br0 tcp:127.0.0.1:6653 tcp:127.0.0.1:6654

sudo ovs-vsctl add-br br1 \
-- <span class="hljs-built_in">set</span> bridge br1 other-config:datapath-id=0000000000000002 \
-- <span class="hljs-built_in">set</span> bridge br1 other-config:<span class="hljs-built_in">disable</span>-in-band=<span class="hljs-literal">true</span> \
-- <span class="hljs-built_in">set</span> bridge br1 fail_mode=secure \
-- add-port br1 veth-host2 -- <span class="hljs-built_in">set</span> interface veth-host2 ofport_request=1 \
-- add-port br1 veth-server2 -- <span class="hljs-built_in">set</span> interface veth-server2 ofport_request=2 \
-- <span class="hljs-built_in">set</span>-controller br1 tcp:127.0.0.1:6653 tcp:127.0.0.1:6654</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>4. br0 &#x548C; br1 &#x4E92;&#x8054;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">inter_switch_link br0:3 br1:3</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="___16">&#x7F51;&#x7EDC;&#x8FDE;&#x901A;&#x6D4B;&#x8BD5;</h3>
<div class="listingblock">
<div class="title"><strong>1. host &#x548C; server &#x4E92; ping</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> 1 2 ;<span class="hljs-keyword">do</span> <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> 1 2 ; <span class="hljs-keyword">do</span> as_ns host<span class="hljs-variable">$i</span> ping 10.0.2.<span class="hljs-variable">$j</span> -c3 ; <span class="hljs-keyword">done</span> ; <span class="hljs-keyword">done</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>2. &#x5728; br0 Port 3 &#x53E3;&#x6293;&#x5305;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ sudo tcpdump <span class="hljs-_">-l</span> <span class="hljs-_">-e</span> -n -i l-br0_3-br1_3
16:43:08.408924 0e:00:00:00:00:01 &gt; 01:80:c2:00:00:0e, ethertype LLDP (0x88cc), length 75: LLDP, length 61: br0
16:43:08.409017 0e:00:00:00:00:01 &gt; 01:80:c2:00:00:0e, ethertype LLDP (0x88cc), length 75: LLDP, length 61: br1
16:43:16.828050 00:00:00:00:00:22 &gt; 12:0a:0c:9b:f1:94, ethertype ARP (0x0806), length 60: Request who-has 10.0.2.2 tell 10.0.2.254, length 46
16:43:16.828156 00:00:00:00:00:11 &gt; e6:ed:57:96:3c:85, ethertype ARP (0x0806), length 60: Request who-has 10.0.1.2 tell 10.0.1.254, length 46
16:43:16.828502 00:00:00:00:00:22 &gt; ca:45:be:b5:39:d2, ethertype ARP (0x0806), length 60: Request who-has 10.0.2.1 tell 10.0.2.254, length 46
16:43:16.828625 00:00:00:00:00:11 &gt; 9e:d7:81:79:8b:5d, ethertype ARP (0x0806), length 60: Request who-has 10.0.1.1 tell 10.0.1.254, length 46
16:43:23.782973 00:00:00:00:00:22 &gt; 12:0a:0c:9b:f1:94, ethertype 802.1Q (0x8100), length 102: vlan 200, p 0, ethertype IPv4, 10.0.1.1 &gt; 10.0.2.2: ICMP <span class="hljs-built_in">echo</span> request, id 7178, seq 1, length 64
16:43:23.783133 00:00:00:00:00:11 &gt; 9e:d7:81:79:8b:5d, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 10.0.2.2 &gt; 10.0.1.1: ICMP <span class="hljs-built_in">echo</span> reply, id 7178, seq 1, length 64
16:43:24.784170 00:00:00:00:00:22 &gt; 12:0a:0c:9b:f1:94, ethertype 802.1Q (0x8100), length 102: vlan 200, p 0, ethertype IPv4, 10.0.1.1 &gt; 10.0.2.2: ICMP <span class="hljs-built_in">echo</span> request, id 7178, seq 2, length 64
16:43:24.784198 00:00:00:00:00:11 &gt; 9e:d7:81:79:8b:5d, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 10.0.2.2 &gt; 10.0.1.1: ICMP <span class="hljs-built_in">echo</span> reply, id 7178, seq 2, length 64
16:43:25.807420 00:00:00:00:00:22 &gt; 12:0a:0c:9b:f1:94, ethertype 802.1Q (0x8100), length 102: vlan 200, p 0, ethertype IPv4, 10.0.1.1 &gt; 10.0.2.2: ICMP <span class="hljs-built_in">echo</span> request, id 7178, seq 3, length 64
16:43:25.807509 00:00:00:00:00:11 &gt; 9e:d7:81:79:8b:5d, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 10.0.2.2 &gt; 10.0.1.1: ICMP <span class="hljs-built_in">echo</span> reply, id 7178, seq 3, length 64
16:43:25.821270 00:00:00:00:00:22 &gt; ca:45:be:b5:39:d2, ethertype 802.1Q (0x8100), length 102: vlan 200, p 0, ethertype IPv4, 10.0.1.2 &gt; 10.0.2.1: ICMP <span class="hljs-built_in">echo</span> request, id 7182, seq 1, length 64
16:43:25.821446 00:00:00:00:00:11 &gt; e6:ed:57:96:3c:85, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 10.0.2.1 &gt; 10.0.1.2: ICMP <span class="hljs-built_in">echo</span> reply, id 7182, seq 1, length 64
16:43:26.831589 00:00:00:00:00:22 &gt; ca:45:be:b5:39:d2, ethertype 802.1Q (0x8100), length 102: vlan 200, p 0, ethertype IPv4, 10.0.1.2 &gt; 10.0.2.1: ICMP <span class="hljs-built_in">echo</span> request, id 7182, seq 2, length 64
16:43:26.831660 00:00:00:00:00:11 &gt; e6:ed:57:96:3c:85, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 10.0.2.1 &gt; 10.0.1.2: ICMP <span class="hljs-built_in">echo</span> reply, id 7182, seq 2, length 64
16:43:27.855472 00:00:00:00:00:22 &gt; ca:45:be:b5:39:d2, ethertype 802.1Q (0x8100), length 102: vlan 200, p 0, ethertype IPv4, 10.0.1.2 &gt; 10.0.2.1: ICMP <span class="hljs-built_in">echo</span> request, id 7182, seq 3, length 64
16:43:27.855576 00:00:00:00:00:11 &gt; e6:ed:57:96:3c:85, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 10.0.2.1 &gt; 10.0.1.2: ICMP <span class="hljs-built_in">echo</span> reply, id 7182, seq 3, length 64</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>3. host1 ping server1</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">as_ns host1 ping 10.0.2.1 -c3</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>4. &#x5728; br0 Port 3 &#x53E3;&#x6293;&#x5305;(&#x6CA1;&#x6709; ICPM &#x5305;)</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ sudo tcpdump <span class="hljs-_">-l</span> <span class="hljs-_">-e</span> -n -i l-br0_3-br1_3
16:51:16.817890 0e:00:00:00:00:01 &gt; 01:80:c2:00:00:0e, ethertype LLDP (0x88cc), length 75: LLDP, length 61: br0
16:51:16.818580 0e:00:00:00:00:01 &gt; 01:80:c2:00:00:0e, ethertype LLDP (0x88cc), length 75: LLDP, length 61: br1
16:51:27.597370 00:00:00:00:00:22 &gt; ca:45:be:b5:39:d2, ethertype ARP (0x0806), length 60: Request who-has 10.0.2.1 tell 10.0.2.254, length 46
16:51:39.583223 00:00:00:00:00:11 &gt; 9e:d7:81:79:8b:5d, ethertype ARP (0x0806), length 60: Request who-has 10.0.1.1 tell 10.0.1.254, length 46
16:51:45.607712 00:00:00:00:00:22 &gt; 12:0a:0c:9b:f1:94, ethertype ARP (0x0806), length 60: Request who-has 10.0.2.2 tell 10.0.2.254, length 46
16:51:45.608139 00:00:00:00:00:11 &gt; e6:ed:57:96:3c:85, ethertype ARP (0x0806), length 60: Request who-has 10.0.1.2 tell 10.0.1.254, length 46</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_3_switch_2_vlan_1_tunnel">3 Switch 2 VLAN 1 Tunnel</h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="image"><img src="img/ovs-3switch-2vlan-1tunnel.png" alt="ovs 3switch 2vlan 1tunnel.png"></span></p>
</div>
<div class="sect2">
<h3 id="___17">&#x63A7;&#x5236;&#x5E73;&#x9762;&#x914D;&#x7F6E;</h3>
<div class="listingblock">
<div class="title"><strong>1. &#x66F4;&#x65B0; /etc/faucet/faucet.yaml</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">acls:
 tunnel-to-host1:
 - rule:
   actions:
     output:
       tunnel:
         <span class="hljs-built_in">type</span>: <span class="hljs-string">&apos;vlan&apos;</span>
         tunnel_id: 901
         dp: br0
         port: 1
 tunnel-to-host2:
 - rule:
   actions:
     output:
       tunnel:
         <span class="hljs-built_in">type</span>: <span class="hljs-string">&apos;vlan&apos;</span>
         tunnel_id: 902
         dp: br2
         port: 1
vlans:
  host1:
    vid: 101
  host2:
    vid: 102
dps:
  br0:
    dp_id: 0x1
    hardware: <span class="hljs-string">&quot;Open vSwitch&quot;</span>
    stack:
      priority: 1
    interfaces:
      1:
        description: <span class="hljs-string">&quot;host1 network namespace&quot;</span>
        native_vlan: host1
        acl_<span class="hljs-keyword">in</span>: tunnel-to-host2
      2:
        description: <span class="hljs-string">&quot;br0 stack link to br1&quot;</span>
        stack:
          dp: br1
          port: 1
  br1:
    dp_id: 0x2
    hardware: <span class="hljs-string">&quot;Open vSwitch&quot;</span>
    interfaces:
      1:
        description: <span class="hljs-string">&quot;br1 stack link to br0&quot;</span>
        stack:
          dp: br0
          port: 2
      2:
        description: <span class="hljs-string">&quot;br1 stack link to br2&quot;</span>
        stack:
          dp: br2
          port: 2
  br2:
    dp_id: 0x3
    hardware: <span class="hljs-string">&quot;Open vSwitch&quot;</span>
    interfaces:
      1:
        description: <span class="hljs-string">&quot;host2 network namespace&quot;</span>
        native_vlan: host2
        acl_<span class="hljs-keyword">in</span>: tunnel-to-host1
      2:
        description: <span class="hljs-string">&quot;br2 stack link to br1&quot;</span>
        stack:
          dp: br1
          port: 2</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>2. &#x91CD;&#x65B0;&#x52A0;&#x8F7D;&#x670D;&#x52A1;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo systemctl reload faucet</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="___18">&#x6570;&#x636E;&#x5E73;&#x9762;&#x914D;&#x7F6E;</h3>
<div class="listingblock">
<div class="title"><strong>1. &#x521B;&#x5EFA; Host</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">create_ns host1 10.0.1.1/24
create_ns host2 10.0.1.2/24</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>2. OVS &#x914D;&#x7F6E;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo ovs-vsctl add-br br0 \
-- <span class="hljs-built_in">set</span> bridge br0 other-config:datapath-id=0000000000000001 \
-- <span class="hljs-built_in">set</span> bridge br0 other-config:<span class="hljs-built_in">disable</span>-in-band=<span class="hljs-literal">true</span> \
-- <span class="hljs-built_in">set</span> bridge br0 fail_mode=secure \
-- add-port br0 veth-host1 -- <span class="hljs-built_in">set</span> interface veth-host1 ofport_request=1 \
-- <span class="hljs-built_in">set</span>-controller br0 tcp:127.0.0.1:6653 tcp:127.0.0.1:6654

sudo ovs-vsctl add-br br1 \
-- <span class="hljs-built_in">set</span> bridge br1 other-config:datapath-id=0000000000000002 \
-- <span class="hljs-built_in">set</span> bridge br1 other-config:<span class="hljs-built_in">disable</span>-in-band=<span class="hljs-literal">true</span> \
-- <span class="hljs-built_in">set</span> bridge br1 fail_mode=secure \
-- <span class="hljs-built_in">set</span>-controller br1 tcp:127.0.0.1:6653 tcp:127.0.0.1:6654

sudo ovs-vsctl add-br br2 \
-- <span class="hljs-built_in">set</span> bridge br2 other-config:datapath-id=0000000000000003 \
-- <span class="hljs-built_in">set</span> bridge br2 other-config:<span class="hljs-built_in">disable</span>-in-band=<span class="hljs-literal">true</span> \
-- <span class="hljs-built_in">set</span> bridge br2 fail_mode=secure \
-- add-port br2 veth-host2 -- <span class="hljs-built_in">set</span> interface veth-host2 ofport_request=1 \
-- <span class="hljs-built_in">set</span>-controller br2 tcp:127.0.0.1:6653 tcp:127.0.0.1:6654</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>3. &#x4EA4;&#x6362;&#x673A;&#x4E92;&#x8054;&#x914D;&#x7F6E;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">inter_switch_link br0:2 br1:1
inter_switch_link br1:2 br2:2</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="___19">&#x7F51;&#x7EDC;&#x8FDE;&#x901A;&#x6D4B;&#x8BD5;</h3>
<div class="listingblock">
<div class="title"><strong>1. host1 ping host2</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">as_ns host1 ping 10.0.1.2 -c3</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>2. &#x5728; br1 Port 2 &#x53E3;&#x6293;&#x5305;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ sudo tcpdump <span class="hljs-_">-l</span> <span class="hljs-_">-e</span> -n -i l-br1_2-br2_2
17:52:50.505589 0e:00:00:00:00:01 &gt; 01:80:c2:00:00:0e, ethertype LLDP (0x88cc), length 75: LLDP, length 61: br1
17:52:50.506778 0e:00:00:00:00:01 &gt; 01:80:c2:00:00:0e, ethertype LLDP (0x88cc), length 75: LLDP, length 61: br2
17:52:53.915819 32:4d:20:13:6a:ce &gt; 33:33:00:00:00:02, ethertype IPv6 (0x86dd), length 70: fe80::304d:20ff:fe13:6ace &gt; ff02::2: ICMP6, router solicitation, length 16
17:52:55.035316 4a:9e:04:c6:e1:19 &gt; 26:63:0a:65:14:21, ethertype 802.1Q (0x8100), length 102: vlan 902, p 3, ethertype IPv4, 10.0.1.1 &gt; 10.0.1.2: ICMP <span class="hljs-built_in">echo</span> request, id 9412, seq 1, length 64
17:52:55.035402 26:63:0a:65:14:21 &gt; 4a:9e:04:c6:e1:19, ethertype 802.1Q (0x8100), length 102: vlan 901, p 3, ethertype IPv4, 10.0.1.2 &gt; 10.0.1.1: ICMP <span class="hljs-built_in">echo</span> reply, id 9412, seq 1, length 64
17:52:56.060190 4a:9e:04:c6:e1:19 &gt; 26:63:0a:65:14:21, ethertype 802.1Q (0x8100), length 102: vlan 902, p 3, ethertype IPv4, 10.0.1.1 &gt; 10.0.1.2: ICMP <span class="hljs-built_in">echo</span> request, id 9412, seq 2, length 64
17:52:56.060237 26:63:0a:65:14:21 &gt; 4a:9e:04:c6:e1:19, ethertype 802.1Q (0x8100), length 102: vlan 901, p 3, ethertype IPv4, 10.0.1.2 &gt; 10.0.1.1: ICMP <span class="hljs-built_in">echo</span> reply, id 9412, seq 2, length 64
17:52:57.088206 4a:9e:04:c6:e1:19 &gt; 26:63:0a:65:14:21, ethertype 802.1Q (0x8100), length 102: vlan 902, p 3, ethertype IPv4, 10.0.1.1 &gt; 10.0.1.2: ICMP <span class="hljs-built_in">echo</span> request, id 9412, seq 3, length 64
17:52:57.088290 26:63:0a:65:14:21 &gt; 4a:9e:04:c6:e1:19, ethertype 802.1Q (0x8100), length 102: vlan 901, p 3, ethertype IPv4, 10.0.1.2 &gt; 10.0.1.1: ICMP <span class="hljs-built_in">echo</span> reply, id 9412, seq 3, length 64</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_3_switch_1_vlan_loop">3 Switch 1 VLAN(Loop)</h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="image"><img src="img/ovs-3switch-loop.png" alt="ovs 3switch loop.png"></span></p>
</div>
<div class="sect2">
<h3 id="___20">&#x7BA1;&#x7406;&#x5E73;&#x9762;&#x914D;&#x7F6E;</h3>
<div class="listingblock">
<div class="title"><strong>1. &#x66F4;&#x65B0; /etc/faucet/faucet.yaml</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">vlans:
  hosts:
    vid: 100
dps:
  br0:
    dp_id: 0x1
    hardware: <span class="hljs-string">&quot;Open vSwitch&quot;</span>
    stack:
      priority: 1
    interfaces:
      1:
        description: <span class="hljs-string">&quot;host1 network namespace&quot;</span>
        native_vlan: hosts
      2:
        description: <span class="hljs-string">&quot;br0 stack link to br1&quot;</span>
        stack:
          dp: br1
          port: 2
      3:
        description: <span class="hljs-string">&quot;br0 stack link to br2&quot;</span>
        stack:
          dp: br2
          port: 2
  br1:
    dp_id: 0x2
    hardware: <span class="hljs-string">&quot;Open vSwitch&quot;</span>
    interfaces:
      1:
        description: <span class="hljs-string">&quot;host2 network namespace&quot;</span>
        native_vlan: hosts
      2:
        description: <span class="hljs-string">&quot;br1 stack link to br0&quot;</span>
        stack:
          dp: br0
          port: 2
      3:
        description: <span class="hljs-string">&quot;br1 stack link to br2&quot;</span>
        stack:
          dp: br2
          port: 3
  br2:
    dp_id: 0x3
    hardware: <span class="hljs-string">&quot;Open vSwitch&quot;</span>
    interfaces:
      1:
        description: <span class="hljs-string">&quot;host3 network namespace&quot;</span>
        native_vlan: hosts
      2:
        description: <span class="hljs-string">&quot;br2 stack link to br0&quot;</span>
        stack:
          dp: br0
          port: 3
      3:
        description: <span class="hljs-string">&quot;br2 stack link to br1&quot;</span>
        stack:
          dp: br1
          port: 3</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>2. &#x91CD;&#x65B0;&#x52A0;&#x8F7D;&#x670D;&#x52A1;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo systemctl reload faucet</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="___21">&#x6570;&#x636E;&#x5E73;&#x9762;&#x914D;&#x7F6E;</h3>
<div class="listingblock">
<div class="title"><strong>1. &#x6DFB;&#x52A0; Host</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">create_ns host1 10.0.1.1/24
create_ns host2 10.0.1.2/24
create_ns host3 10.0.1.3/24</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>2. &#x6DFB;&#x52A0; Switch</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo ovs-vsctl add-br br0 \
-- <span class="hljs-built_in">set</span> bridge br0 other-config:datapath-id=0000000000000001 \
-- <span class="hljs-built_in">set</span> bridge br0 other-config:<span class="hljs-built_in">disable</span>-in-band=<span class="hljs-literal">true</span> \
-- <span class="hljs-built_in">set</span> bridge br0 fail_mode=secure \
-- add-port br0 veth-host1 -- <span class="hljs-built_in">set</span> interface veth-host1 ofport_request=1 \
-- <span class="hljs-built_in">set</span>-controller br0 tcp:127.0.0.1:6653 tcp:127.0.0.1:6654

sudo ovs-vsctl add-br br1 \
-- <span class="hljs-built_in">set</span> bridge br1 other-config:datapath-id=0000000000000002 \
-- <span class="hljs-built_in">set</span> bridge br1 other-config:<span class="hljs-built_in">disable</span>-in-band=<span class="hljs-literal">true</span> \
-- <span class="hljs-built_in">set</span> bridge br1 fail_mode=secure \
-- add-port br1 veth-host2 -- <span class="hljs-built_in">set</span> interface veth-host2 ofport_request=1 \
-- <span class="hljs-built_in">set</span>-controller br1 tcp:127.0.0.1:6653 tcp:127.0.0.1:6654

sudo ovs-vsctl add-br br2 \
-- <span class="hljs-built_in">set</span> bridge br2 other-config:datapath-id=0000000000000003 \
-- <span class="hljs-built_in">set</span> bridge br2 other-config:<span class="hljs-built_in">disable</span>-in-band=<span class="hljs-literal">true</span> \
-- <span class="hljs-built_in">set</span> bridge br2 fail_mode=secure \
-- add-port br2 veth-host3 -- <span class="hljs-built_in">set</span> interface veth-host3 ofport_request=1 \
-- <span class="hljs-built_in">set</span>-controller br2 tcp:127.0.0.1:6653 tcp:127.0.0.1:6654</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>3. Switch &#x4E92;&#x8054;&#x914D;&#x7F6E;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">inter_switch_link br0:2 br1:2
inter_switch_link br0:3 br2:2
inter_switch_link br1:3 br2:3</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="___22">&#x7F51;&#x7EDC;&#x8FDE;&#x901A;&#x6D4B;&#x8BD5;</h3>
<div class="listingblock">
<div class="title"><strong>1. host1 ping host2</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">as_ns host1 ping 10.0.1.2</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>2. &#x5728; br2 Port 2 &#x4E0A;&#x6293;&#x5305;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ sudo tcpdump <span class="hljs-_">-l</span> <span class="hljs-_">-e</span> -n -i l-br1_2-br0_2
18:28:27.454463 0e:00:00:00:00:01 &gt; 01:80:c2:00:00:0e, ethertype LLDP (0x88cc), length 75: LLDP, length 61: br0
18:28:27.455457 0e:00:00:00:00:01 &gt; 01:80:c2:00:00:0e, ethertype LLDP (0x88cc), length 75: LLDP, length 61: br1
18:28:27.676093 da:bb:a9:7a:38:cb &gt; 9a:1e:24:58:c5:65, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 10.0.1.1 &gt; 10.0.1.2: ICMP <span class="hljs-built_in">echo</span> request, id 10650, seq 198, length 64
18:28:27.676141 9a:1e:24:58:c5:65 &gt; da:bb:a9:7a:38:cb, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 10.0.1.2 &gt; 10.0.1.1: ICMP <span class="hljs-built_in">echo</span> reply, id 10650, seq 198, length 64
18:28:28.700539 da:bb:a9:7a:38:cb &gt; 9a:1e:24:58:c5:65, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 10.0.1.1 &gt; 10.0.1.2: ICMP <span class="hljs-built_in">echo</span> request, id 10650, seq 199, length 64
18:28:28.700586 9a:1e:24:58:c5:65 &gt; da:bb:a9:7a:38:cb, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 10.0.1.2 &gt; 10.0.1.1: ICMP <span class="hljs-built_in">echo</span> reply, id 10650, seq 199, length 64
18:28:29.724889 da:bb:a9:7a:38:cb &gt; 9a:1e:24:58:c5:65, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 10.0.1.1 &gt; 10.0.1.2: ICMP <span class="hljs-built_in">echo</span> request, id 10650, seq 200, length 64</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
host1 ping host2 &#x6570;&#x636E;&#x5305;&#x94FE;&#x8DEF;: <code>host1</code> &#x2192; <code>br0/port1</code> &#x2192; <code>br0/port2</code> &#x2192; <code>br1/port2</code> &#x2192; <code>br1/port1</code> &#x2192; <code>host2</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title"><strong>3. host1 ping host3</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">as_ns host1 ping 10.0.1.3</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>4. &#x5728; br2 Port 2 &#x53E3;&#x6293;&#x5305;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ sudo tcpdump <span class="hljs-_">-l</span> <span class="hljs-_">-e</span> -n -i l-br2_2-br0_3
18:33:00.874678 0e:00:00:00:00:01 &gt; 01:80:c2:00:00:0e, ethertype LLDP (0x88cc), length 75: LLDP, length 61: br0
18:33:00.875990 0e:00:00:00:00:01 &gt; 01:80:c2:00:00:0e, ethertype LLDP (0x88cc), length 75: LLDP, length 61: br2
18:33:01.340137 da:bb:a9:7a:38:cb &gt; 2a:34:84:86:0c:20, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 10.0.1.1 &gt; 10.0.1.3: ICMP <span class="hljs-built_in">echo</span> request, id 11005, seq 119, length 64
18:33:01.340188 2a:34:84:86:0c:20 &gt; da:bb:a9:7a:38:cb, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 10.0.1.3 &gt; 10.0.1.1: ICMP <span class="hljs-built_in">echo</span> reply, id 11005, seq 119, length 64
18:33:02.364210 da:bb:a9:7a:38:cb &gt; 2a:34:84:86:0c:20, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 10.0.1.1 &gt; 10.0.1.3: ICMP <span class="hljs-built_in">echo</span> request, id 11005, seq 120, length 64
18:33:02.364256 2a:34:84:86:0c:20 &gt; da:bb:a9:7a:38:cb, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 10.0.1.3 &gt; 10.0.1.1: ICMP <span class="hljs-built_in">echo</span> reply, id 11005, seq 120, length 64</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
host1 ping host3 &#x6570;&#x636E;&#x5305;&#x94FE;&#x8DEF;: <code>host1</code> &#x2192; <code>br0/port1</code> &#x2192; <code>br0/port3</code> &#x2192; <code>br2/port2</code> &#x2192; <code>br2/port1</code> &#x2192; <code>host3</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title"><strong>5. &#x62C6;&#x9664; <code>br0/port3</code> &#x2192; <code>br2/port2</code> &#x4E4B;&#x95F4;&#x8FDE;&#x63A5;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo ip link <span class="hljs-built_in">set</span> down l-br0_3-br2_2
sudo ip link <span class="hljs-built_in">set</span> down l-br2_2-br0_3</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>6. &#x518D;&#x6B21;&#x6267;&#x884C; host1 ping host3</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">as_ns host1 ping 10.0.1.3</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>7. &#x5728; br2 Port 3 &#x53E3;&#x6293;&#x5305;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ sudo tcpdump <span class="hljs-_">-l</span> <span class="hljs-_">-e</span> -n -i l-br2_3-br1_3
18:41:12.034824 0e:00:00:00:00:01 &gt; 01:80:c2:00:00:0e, ethertype LLDP (0x88cc), length 75: LLDP, length 61: br1
18:41:12.035013 0e:00:00:00:00:01 &gt; 01:80:c2:00:00:0e, ethertype LLDP (0x88cc), length 75: LLDP, length 61: br2
18:41:14.118709 da:bb:a9:7a:38:cb &gt; 2a:34:84:86:0c:20, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 10.0.1.1 &gt; 10.0.1.3: ICMP <span class="hljs-built_in">echo</span> request, id 11454, seq 1, length 64
18:41:14.118820 2a:34:84:86:0c:20 &gt; da:bb:a9:7a:38:cb, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 10.0.1.3 &gt; 10.0.1.1: ICMP <span class="hljs-built_in">echo</span> reply, id 11454, seq 1, length 64
18:41:15.132197 da:bb:a9:7a:38:cb &gt; 2a:34:84:86:0c:20, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 10.0.1.1 &gt; 10.0.1.3: ICMP <span class="hljs-built_in">echo</span> request, id 11454, seq 2, length 64
18:41:15.132239 2a:34:84:86:0c:20 &gt; da:bb:a9:7a:38:cb, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 10.0.1.3 &gt; 10.0.1.1: ICMP <span class="hljs-built_in">echo</span> reply, id 11454, seq 2, length 64</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
host1 ping host3 &#x6570;&#x636E;&#x5305;&#x94FE;&#x8DEF;: <code>host1</code> &#x2192; <code>br0/port1</code> &#x2192; <code>br0/port2</code> - <code>br1/port2</code> &#x2192; <code>br1/port3</code> &#x2192; <code>br2/port3</code>  &#x2192; <code>br2/port1</code> &#x2192; <code>host3</code>.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_4_switch_1_vlan_multi_root">4 Switch 1 VLAN(Multi-root)</h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="image"><img src="img/ovs-4switch-multi-root.png" alt="ovs 4switch multi root.png"></span></p>
</div>
<div class="sect2">
<h3 id="___23">&#x7BA1;&#x7406;&#x5E73;&#x9762;&#x914D;&#x7F6E;</h3>
<div class="listingblock">
<div class="title"><strong>1. &#x66F4;&#x65B0;/etc/faucet/faucet.yaml</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">vlans:
  hosts:
    vid: 100
dps:
  br0:
    dp_id: 0x1
    hardware: <span class="hljs-string">&quot;Open vSwitch&quot;</span>
    stack:
      priority: 1
    interfaces:
      1:
        description: <span class="hljs-string">&quot;br0 stack link to br2&quot;</span>
        stack:
          dp: br2
          port: 2
      2:
        description: <span class="hljs-string">&quot;br0 stack link to br3&quot;</span>
        stack:
          dp: br3
          port: 3
  br1:
    dp_id: 0x2
    hardware: <span class="hljs-string">&quot;Open vSwitch&quot;</span>
    stack:
      priority: 1
    interfaces:
      1:
        description: <span class="hljs-string">&quot;br1 stack link to br3&quot;</span>
        stack:
          dp: br3
          port: 2
      2:
        description: <span class="hljs-string">&quot;br1 stack link to br2&quot;</span>
        stack:
          dp: br2
          port: 3
  br2:
    dp_id: 0x3
    hardware: <span class="hljs-string">&quot;Open vSwitch&quot;</span>
    interfaces:
      1:
        description: <span class="hljs-string">&quot;host1 network namespace&quot;</span>
        native_vlan: hosts
      2:
        description: <span class="hljs-string">&quot;br2 stack link to br0&quot;</span>
        stack:
          dp: br0
          port: 1
      3:
        description: <span class="hljs-string">&quot;br2 stack link to br1&quot;</span>
        stack:
          dp: br1
          port: 2
  br3:
    dp_id: 0x4
    hardware: <span class="hljs-string">&quot;Open vSwitch&quot;</span>
    interfaces:
      1:
        description: <span class="hljs-string">&quot;host2 network namespace&quot;</span>
        native_vlan: hosts
      2:
        description: <span class="hljs-string">&quot;br3 stack link to br1&quot;</span>
        stack:
          dp: br1
          port: 1
      3:
        description: <span class="hljs-string">&quot;br3 stack link to br0&quot;</span>
        stack:
          dp: br0
          port: 2</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>2. &#x91CD;&#x65B0;&#x52A0;&#x8F7D;&#x670D;&#x52A1;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo systemctl restart faucet</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="___24">&#x6570;&#x636E;&#x5E73;&#x9762;&#x914D;&#x7F6E;</h3>
<div class="listingblock">
<div class="title"><strong>1. &#x6DFB;&#x52A0; Host</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">create_ns host1 10.0.1.1/24
create_ns host2 10.0.1.2/24</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>2. &#x6DFB;&#x52A0; Switch</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo ovs-vsctl add-br br0 \
-- <span class="hljs-built_in">set</span> bridge br0 other-config:datapath-id=0000000000000001 \
-- <span class="hljs-built_in">set</span> bridge br0 other-config:<span class="hljs-built_in">disable</span>-in-band=<span class="hljs-literal">true</span> \
-- <span class="hljs-built_in">set</span> bridge br0 fail_mode=secure \
-- <span class="hljs-built_in">set</span>-controller br0 tcp:127.0.0.1:6653 tcp:127.0.0.1:6654

sudo ovs-vsctl add-br br1 \
-- <span class="hljs-built_in">set</span> bridge br1 other-config:datapath-id=0000000000000002 \
-- <span class="hljs-built_in">set</span> bridge br1 other-config:<span class="hljs-built_in">disable</span>-in-band=<span class="hljs-literal">true</span> \
-- <span class="hljs-built_in">set</span> bridge br1 fail_mode=secure \
-- <span class="hljs-built_in">set</span>-controller br1 tcp:127.0.0.1:6653 tcp:127.0.0.1:6654

sudo ovs-vsctl add-br br2 \
-- <span class="hljs-built_in">set</span> bridge br2 other-config:datapath-id=0000000000000003 \
-- <span class="hljs-built_in">set</span> bridge br2 other-config:<span class="hljs-built_in">disable</span>-in-band=<span class="hljs-literal">true</span> \
-- <span class="hljs-built_in">set</span> bridge br2 fail_mode=secure \
-- add-port br2 veth-host1 -- <span class="hljs-built_in">set</span> interface veth-host1 ofport_request=1 \
-- <span class="hljs-built_in">set</span>-controller br2 tcp:127.0.0.1:6653 tcp:127.0.0.1:6654

sudo ovs-vsctl add-br br3 \
-- <span class="hljs-built_in">set</span> bridge br3 other-config:datapath-id=0000000000000004 \
-- <span class="hljs-built_in">set</span> bridge br3 other-config:<span class="hljs-built_in">disable</span>-in-band=<span class="hljs-literal">true</span> \
-- <span class="hljs-built_in">set</span> bridge br3 fail_mode=secure \
-- add-port br3 veth-host2 -- <span class="hljs-built_in">set</span> interface veth-host2 ofport_request=1 \
-- <span class="hljs-built_in">set</span>-controller br3 tcp:127.0.0.1:6653 tcp:127.0.0.1:6654</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>3. &#x4EA4;&#x6362;&#x673A;&#x4E4B;&#x95F4;&#x8FDE;&#x63A5;&#x914D;&#x7F6E;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">inter_switch_link br0:1 br2:2
inter_switch_link br0:2 br3:3
inter_switch_link br1:1 br3:2
inter_switch_link br1:2 br2:3</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="___25">&#x7F51;&#x7EDC;&#x8FDE;&#x901A;&#x6D4B;&#x8BD5;</h3>
<div class="listingblock">
<div class="title"><strong>1. host1 ping host2</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">as_ns host1 ping 10.0.1.2</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>2. &#x5206;&#x522B;&#x5728; br2 port2&#x3001;br0 port2&#x3001;br3 port3&#x3001;br3 port1 &#x6293;&#x5305;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ sudo tcpdump <span class="hljs-_">-l</span> <span class="hljs-_">-e</span> -n -i l-br2_2-br0_1
19:30:19.932684 e6:36:0d:2d:ac:c5 &gt; ea:1a:9e:07:b2:a4, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 10.0.1.1 &gt; 10.0.1.2: ICMP <span class="hljs-built_in">echo</span> request, id 13269, seq 44, length 64
19:30:19.932722 ea:1a:9e:07:b2:a4 &gt; e6:36:0d:2d:ac:c5, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 10.0.1.2 &gt; 10.0.1.1: ICMP <span class="hljs-built_in">echo</span> reply, id 13269, seq 44, length 64
19:30:20.956209 e6:36:0d:2d:ac:c5 &gt; ea:1a:9e:07:b2:a4, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 10.0.1.1 &gt; 10.0.1.2: ICMP <span class="hljs-built_in">echo</span> request, id 13269, seq 45, length 64
19:30:20.956257 ea:1a:9e:07:b2:a4 &gt; e6:36:0d:2d:ac:c5, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 10.0.1.2 &gt; 10.0.1.1: ICMP <span class="hljs-built_in">echo</span> reply, id 13269, seq 45, length 64

$ sudo tcpdump <span class="hljs-_">-l</span> <span class="hljs-_">-e</span> -n -i l-br0_2-br3_3
19:32:25.884696 e6:36:0d:2d:ac:c5 &gt; ea:1a:9e:07:b2:a4, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 10.0.1.1 &gt; 10.0.1.2: ICMP <span class="hljs-built_in">echo</span> request, id 13269, seq 167, length 64
19:32:25.884754 ea:1a:9e:07:b2:a4 &gt; e6:36:0d:2d:ac:c5, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 10.0.1.2 &gt; 10.0.1.1: ICMP <span class="hljs-built_in">echo</span> reply, id 13269, seq 167, length 64
19:32:26.908831 e6:36:0d:2d:ac:c5 &gt; ea:1a:9e:07:b2:a4, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 10.0.1.1 &gt; 10.0.1.2: ICMP <span class="hljs-built_in">echo</span> request, id 13269, seq 168, length 64
19:32:26.908916 ea:1a:9e:07:b2:a4 &gt; e6:36:0d:2d:ac:c5, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 10.0.1.2 &gt; 10.0.1.1: ICMP <span class="hljs-built_in">echo</span> reply, id 13269, seq 168, length 64

$ sudo tcpdump <span class="hljs-_">-l</span> <span class="hljs-_">-e</span> -n -i l-br3_3-br0_2
19:34:31.772899 e6:36:0d:2d:ac:c5 &gt; ea:1a:9e:07:b2:a4, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 10.0.1.1 &gt; 10.0.1.2: ICMP <span class="hljs-built_in">echo</span> request, id 13269, seq 290, length 64
19:34:31.772945 ea:1a:9e:07:b2:a4 &gt; e6:36:0d:2d:ac:c5, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 10.0.1.2 &gt; 10.0.1.1: ICMP <span class="hljs-built_in">echo</span> reply, id 13269, seq 290, length 64
19:34:32.796892 e6:36:0d:2d:ac:c5 &gt; ea:1a:9e:07:b2:a4, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 10.0.1.1 &gt; 10.0.1.2: ICMP <span class="hljs-built_in">echo</span> request, id 13269, seq 291, length 64
19:34:32.796939 ea:1a:9e:07:b2:a4 &gt; e6:36:0d:2d:ac:c5, ethertype 802.1Q (0x8100), length 102: vlan 100, p 0, ethertype IPv4, 10.0.1.2 &gt; 10.0.1.1: ICMP <span class="hljs-built_in">echo</span> reply, id 13269, seq 291, length 64

$ sudo tcpdump <span class="hljs-_">-l</span> <span class="hljs-_">-e</span> -n -i veth-host2
19:35:51.644362 e6:36:0d:2d:ac:c5 &gt; ea:1a:9e:07:b2:a4, ethertype IPv4 (0x0800), length 98: 10.0.1.1 &gt; 10.0.1.2: ICMP <span class="hljs-built_in">echo</span> request, id 13269, seq 368, length 64
19:35:51.644434 ea:1a:9e:07:b2:a4 &gt; e6:36:0d:2d:ac:c5, ethertype IPv4 (0x0800), length 98: 10.0.1.2 &gt; 10.0.1.1: ICMP <span class="hljs-built_in">echo</span> reply, id 13269, seq 368, length 64
19:35:52.668893 e6:36:0d:2d:ac:c5 &gt; ea:1a:9e:07:b2:a4, ethertype IPv4 (0x0800), length 98: 10.0.1.1 &gt; 10.0.1.2: ICMP <span class="hljs-built_in">echo</span> request, id 13269, seq 369, length 64
19:35:52.668965 ea:1a:9e:07:b2:a4 &gt; e6:36:0d:2d:ac:c5, ethertype IPv4 (0x0800), length 98: 10.0.1.2 &gt; 10.0.1.1: ICMP <span class="hljs-built_in">echo</span> reply, id 13269, seq 369, length 64</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
host1 ping host2 &#x94FE;&#x8DEF;: <code>host1</code> &#x2192; <code>br2/port2</code> &#x2192; <code>br0/port1</code> &#x2192; <code>br0/port2</code> &#x2192; <code>br3/port3</code> &#x2192; <code>br3/port1</code> &#x2192; <code>host2</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title"><strong>3. &#x5220;&#x9664;&#x4EA4;&#x6362;&#x673A; br0(&#x6A21;&#x62DF;&#x6545;&#x969C;)</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo ovs-vsctl del-br br0</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>4. &#x67E5;&#x770B;&#x65E5;&#x5FD7;&#xFF0C;root &#x5207;&#x6362;&#x4FE1;&#x606F;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">Dec 28 19:39:56 faucet INFO     Reconfiguring existing datapath DPID 1 (0x1)
Dec 28 19:39:56 faucet.valve INFO     DPID 1 (0x1) br0 Stack root change - requires cold start
Dec 28 19:39:56 faucet.valve INFO     DPID 1 (0x1) br0 all ports changed
Dec 28 19:39:56 faucet.valve INFO     DPID 1 (0x1) br0 Using stacking root flood reflection
Dec 28 19:39:56 faucet.valve INFO     DPID 1 (0x1) br0 cold starting
Dec 28 19:39:56 faucet.valve INFO     DPID 1 (0x1) br0 forcing DP reconnection to ensure ports are synchronized
Dec 28 19:39:56 faucet.valve ERROR    DPID 1 (0x1) br0 send_flow_msgs: DP not up</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>5. &#x518D;&#x6B21;&#x6267;&#x884C; host1 ping host2</strong></div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ as_ns host1 ping 10.0.1.2
PING 10.0.1.2 (10.0.1.2) 56(84) bytes of data.
64 bytes from 10.0.1.2: icmp_seq=1 ttl=64 time=0.547 ms
64 bytes from 10.0.1.2: icmp_seq=2 ttl=64 time=0.070 ms
64 bytes from 10.0.1.2: icmp_seq=3 ttl=64 time=0.095 ms</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
br0 &#x5B95;&#x673A;&#x540E;host1 ping host2 &#x94FE;&#x8DEF;: <code>host1</code> &#x2192; <code>br2/port3</code> &#x2192; <code>br1/port2</code> &#x2192; <code>br1/port1</code> &#x2192; <code>br3/port2</code> &#x2192; <code>br3/port1</code> &#x2192; <code>host2</code>.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="ovs.html" class="navigation navigation-prev " aria-label="Previous page: OVS">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="ovs-routing.html" class="navigation navigation-next " aria-label="Next page: ROUTING">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"SWITCHING","level":"1.4.2.1","depth":3,"next":{"title":"ROUTING","level":"1.4.2.2","depth":3,"path":"sdn/ovs-routing.adoc","ref":"sdn/ovs-routing.adoc","articles":[]},"previous":{"title":"OVS","level":"1.4.2","depth":2,"path":"sdn/ovs.adoc","ref":"sdn/ovs.adoc","articles":[{"title":"SWITCHING","level":"1.4.2.1","depth":3,"path":"sdn/ovs-switch.adoc","ref":"sdn/ovs-switch.adoc","articles":[]},{"title":"ROUTING","level":"1.4.2.2","depth":3,"path":"sdn/ovs-routing.adoc","ref":"sdn/ovs-routing.adoc","articles":[]},{"title":"ACLs","level":"1.4.2.3","depth":3,"path":"sdn/ovs-acl.adoc","ref":"sdn/ovs-acl.adoc","articles":[]},{"title":"NFV","level":"1.4.2.4","depth":3,"path":"sdn/ovs-nfv.adoc","ref":"sdn/ovs-nfv.adoc","articles":[]}]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{"copyrightYear":"2019","copyrightHolder":"Kylin Soong"},"plugins":["collapsible-menu","-sharing","sharing-plus","splitter","back-to-top-button","edit-link"],"pluginsConfig":{"tbfed-pagefooter":{"copyright":"Copyright &copy Kylin Soong 2019","modify_label":"该文件修订时间：","modify_format":"YYYY-MM-DD HH:mm:ss"},"collapsible-menu":{},"splitter":{},"search":{},"sharing-plus":{"qq":false,"all":["facebook","google","twitter","instapaper","linkedin","pocket","stumbleupon"],"douban":false,"facebook":true,"weibo":false,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":true,"messenger":false,"line":false,"vk":false,"pocket":true,"google":false,"viber":false,"stumbleupon":false,"qzone":false,"linkedin":false},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"donate":{"wechat":"http://ksoong.org/docs/content/images/wechat.png","alipay":"http://ksoong.org/docs/content/images/alipay.png","title":"","button":"赞赏","alipayText":"支付宝捐赠","wechatText":"微信捐赠"},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"back-to-top-button":{},"sharing":{"weibo":true,"linkedin":true,"google":true,"facebook":true,"all":["facebook","google","linkedin","weibo"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/kylinsoong/docs/blob/gh-pages"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css"}},"file":{"path":"sdn/ovs-switch.adoc","mtime":"2021-12-29T03:18:31.944Z","type":"asciidoc"},"gitbook":{"version":"3.2.3","time":"2022-03-30T14:13:13.098Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-collapsible-menu/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing-plus/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

